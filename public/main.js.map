{"version":3,"file":"main.js","mappings":"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","sources":["webpack://webpack.app/./public/source/components/class.crosshair.component.js","webpack://webpack.app/./public/source/components/class.entity.animal.component.js","webpack://webpack.app/./public/source/components/class.entity.base.component.js","webpack://webpack.app/./public/source/components/class.entity.chicken.component.js","webpack://webpack.app/./public/source/components/class.entity.cow.component.js","webpack://webpack.app/./public/source/components/class.entity.food.status.component.js","webpack://webpack.app/./public/source/components/class.entity.product.status.component.js","webpack://webpack.app/./public/source/components/class.entity.wheat.component.js","webpack://webpack.app/./public/source/components/class.game.entity.gui.component.js","webpack://webpack.app/./public/source/components/class.game.enviroment.gui.component.js","webpack://webpack.app/./public/source/components/class.game.fields.gui.component.js","webpack://webpack.app/./public/source/components/class.game.state.gui.component.js","webpack://webpack.app/./public/source/components/class.incorrectorientation.component.js","webpack://webpack.app/./public/source/components/class.mainmenu.gui.component.js","webpack://webpack.app/./public/source/components/class.staticbackground.component.js","webpack://webpack.app/./public/source/components/class.systembuttons.component.js","webpack://webpack.app/./public/source/components/index.entity.components.js","webpack://webpack.app/./public/source/config.js","webpack://webpack.app/./public/source/phaser.extends/extend.component.class.js","webpack://webpack.app/./public/source/phaser.extends/extend.component.singleton.class.js","webpack://webpack.app/./public/source/phaser.extends/extend.state.class.js","webpack://webpack.app/./public/source/states/state.boot.js","webpack://webpack.app/./public/source/states/state.game.js","webpack://webpack.app/./public/source/states/state.mainmenu.js","webpack://webpack.app/./public/source/tools/class.extend.event.emitter.js","webpack://webpack.app/./public/source/tools/class.keyboard.js","webpack://webpack.app/./public/source/tools/class.vector.js","webpack://webpack.app/./public/source/tools/tool.compare.path.js","webpack://webpack.app/./public/source/tools/tool.events.bus.js","webpack://webpack.app/webpack/bootstrap","webpack://webpack.app/webpack/runtime/define property getters","webpack://webpack.app/webpack/runtime/hasOwnProperty shorthand","webpack://webpack.app/webpack/runtime/make namespace object","webpack://webpack.app/./public/source/main.js"],"sourcesContent":["import config from '../config.js';\r\nimport bus from '../tools/tool.events.bus.js'\r\nimport Component from '../phaser.extends/extend.component.class.js';\r\nimport ComponentSingleton from '../phaser.extends/extend.component.singleton.class.js';\r\n\r\n\r\n\r\nbus.once('core.preload', core => {\r\n    core.load.image('crosshair_arrow', config.gamePath + 'sprites/crosshairs/arrow.png');\r\n});\r\n\r\n\r\n\r\n\r\n\r\n// проверяем наличие мышки\r\nlet mouseIsPresent = false;\r\nconst mouseMoveHandler = e => {\r\n    mouseIsPresent = true;\r\n    window.removeEventListener('mousemove', mouseMoveHandler);\r\n};\r\nwindow.addEventListener('mousemove', mouseMoveHandler);\r\n\r\n\r\n\r\nexport default class Crosshair extends ComponentSingleton {\r\n    constructor(game, parent, name, addToStage, enableBody, physicsBodyType) {\r\n        super(game, parent, 'Crosshair', addToStage, enableBody, physicsBodyType);\r\n    }\r\n\r\n    make() {\r\n        // так как класс компонента наследуется от Phaser.Group то\r\n        // использовать create для инициализации мы не можем, так\r\n        // как у Phaser.Group уже есть метод create\r\n        // Для компонентов унаследованных от ComponentSingleton\r\n        // метод make вызывается ОДИН раз при первом создании компонента\r\n        console.log('Component.make', 'Crosshair');\r\n\r\n        this.updateOnlyExistingChildren = true;\r\n\r\n        this.crosshairs = [];\r\n\r\n        const sprite = new Phaser.Sprite(this.game, 0, 0, 'crosshair_arrow');\r\n        sprite.anchor.set(0, 0);\r\n        sprite.scale.set(0.05);\r\n        sprite.alpha = 0.7;\r\n\r\n        this.setCrosshair('arrow', sprite);\r\n\r\n        // this.game.input.addMoveCallback((pointer, x, y) => {\r\n        //     // pointer returns the active pointer, x and y return the position on the canvas\r\n        //     if (!mouseIsPresent) return;\r\n\r\n        //     this.x = x / config.scale.x;\r\n        //     this.y = y / config.scale.y;\r\n        // });\r\n\r\n        const canvas = this.game.canvas;\r\n        canvas.addEventListener('mousemove', (e) => {\r\n            var rect = canvas.getBoundingClientRect();\r\n            this.x = (e.clientX - rect.left) * config.width / canvas.clientWidth;\r\n            this.y = (e.clientY - rect.top) * config.height / canvas.clientHeight;\r\n        });\r\n\r\n        canvas.addEventListener('mouseover', () => {\r\n            this.visible = true;\r\n            this.game.canvas.style.cursor = 'none';\r\n        });\r\n\r\n        canvas.addEventListener('mouseout', () => {\r\n            this.visible = false;\r\n            this.game.canvas.style.cursor = 'auto';\r\n        });\r\n\r\n    }\r\n    /**\r\n     * регистрирует курсор с именем `name` привязывая к имени изображение `crosshair`\r\n     * @param {string} name  название курсора\r\n     * @param {PIXI.DisplayObject} [crosshair] любой объект, унаследованный от PIXI.DisplayObject\r\n     */\r\n    addCrosshair(name, crosshair) {\r\n        const data = this.crosshairs.find(item => item.name === name);\r\n        if (!data) {\r\n            this.crosshairs.push({\r\n                name,\r\n                crosshair\r\n            });\r\n        } else {\r\n            console.warn(`A crosshair named '${name}' already exists but has now been replaced with a new one`);\r\n            this.removeChild(crosshair);\r\n            data.crosshair = crosshair;\r\n        }\r\n        crosshair.exists = false;\r\n        crosshair.visible = false;\r\n        this.addChild(crosshair);\r\n    }\r\n\r\n    /**\r\n     * включает заранее зарегестрированный курсор с именем `name`. \r\n     * Если задан параметр `crosshair` то узображение курсора с именем `name` будет\r\n     * заменено на `crosshair`\r\n     * @param {string} name  название курсора\r\n     * @param {PIXI.DisplayObject} [crosshair] любой объект, унаследованный от PIXI.DisplayObject\r\n     */\r\n    setCrosshair(name, crosshair) {\r\n        if (crosshair) this.addCrosshair(name, crosshair);\r\n\r\n        const data = this.crosshairs.find(item => item.name === name);\r\n        if (!data) {\r\n            console.warn(`Cursor named '${name}' does not exist`);\r\n            this.game.canvas.style.cursor = 'auto';\r\n            delete this.crosshair;\r\n            delete this.crosshairName;\r\n            return;\r\n        }\r\n        this.crosshair = data.crosshair;\r\n        this.crosshairName = name;\r\n        this.game.canvas.style.cursor = 'none';\r\n\r\n\r\n\r\n        this.crosshairs.forEach(item => {\r\n            if (item.name === name) {\r\n                item.crosshair.exists = true;\r\n                item.crosshair.visible = true;\r\n            } else {\r\n                item.crosshair.exists = false;\r\n                item.crosshair.visible = false;\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * стандартный метод класса Phaser.Group\r\n     * https://photonstorm.github.io/phaser-ce/Phaser.State.html#update\r\n     */  \r\n    update(dt) {\r\n        // к сожалению нормально отключение курсора в браузере не работает, поэтому флаги и костыли)))\r\n        this.game.canvas.style.cursor = this.visible && this.crosshairName ? 'none' : 'auto';\r\n    }\r\n}\r\n","import config from '../config.js';\nimport bus from '../tools/tool.events.bus.js'\nimport EntityBase from \"../components/class.entity.base.component.js\";\n\nexport default class EntityAnimal extends EntityBase {\n    constructor(game, parent, name = 'EntityAnimal', addToStage, enableBody, physicsBodyType) {\n        super(game, parent, name, addToStage, enableBody, physicsBodyType);\n    }\n\n    make() {\n        super.make();\n\n        // счетчики еды\n        this.foodCounter = 0;\n        this.foodTime = 0;\n        this.foodProgress = 0;        \n    }\n    \n\n    /**\n     * стандартный метод класса Phaser.Group\n     * https://photonstorm.github.io/phaser-ce/Phaser.State.html#update\n     */\n    update(game) {\n        super.update(game);\n\n        const elapsed = game.time.elapsedMS;\n        // const timer = game.time.time;\n\n        if (this.foodTime) {\n            this.isProductProgressPaused = true;\n            if (this.foodCounter === 0) return;\n            this.isProductProgressPaused = false;\n\n            this.foodProgress += elapsed;\n            if (this.foodProgress >= this.foodTime) {\n                this.foodProgress -= this.foodTime;\n                this.foodCounter -= 1;\n            }\n            this?.foodStatus?.setStaus?.(this.foodProgress, this.foodCounter);\n        }\n\n\n    }\n    /**\n     * покормить животинку\n     * @param {number} amount количество еды\n     * @returns {boolean} если удалось собрать урожай то `true` иначе `false`\n     */\n    feed(amount) {\n        if (!this.foodTime) return false;\n        this.foodCounter += amount;\n        this?.foodStatus?.setStaus?.(this.foodProgress, this.foodCounter);\n        this?.snd_feed?.play?.();\n        return true;\n    }\n}\n\n","import config from '../config.js';\nimport bus from '../tools/tool.events.bus.js'\nimport Component from \"../phaser.extends/extend.component.class.js\";\n\n\nexport default class EntityBase extends Component {\n    constructor(game, parent, name = 'EntityBase', addToStage, enableBody, physicsBodyType) {\n        super(game, parent, name, addToStage, enableBody, physicsBodyType);\n    }\n\n    make() {\n        // счетчики еды и продукта\n        this.productTime = 0;\n        this.productProgress = 0;\n    }\n\n\n    /**\n     * стандартный метод класса Phaser.Group\n     * https://photonstorm.github.io/phaser-ce/Phaser.State.html#update\n     */\n    update(game) {\n        const elapsed = game.time.elapsedMS;\n        // const timer = game.time.time;\n\n        if (this.isProductProgressPaused) return;\n        if (this.productTime) {\n            this.productProgress += elapsed;\n            this?.productStatus?.setStaus?.(Math.min(1,this.productProgress/this.productTime));\n            if(this.autoCollect){\n                if (this.productProgress >= this.productTime) {\n                    this.productProgress -= this.productTime;\n                    bus.emit('entity.collect', {\n                        // ...field,\n                        wx: this.wx,\n                        wy: this.wy,\n                        entityName: this.entityName\n                    });\n                    this?.snd_collect?.play?.();\n                }\n            }\n        }\n    }\n\n    /**\n     * собрать произведенный продукт\n     * @returns {boolean} если удалось собрать урожай то `true` иначе `false`\n     */\n     collect() {\n        if (!this.productTime) return false;\n        if (this.productProgress < this.productTime) return false;\n        this.productProgress = 0;\n        this?.productStatus?.setStaus?.(Math.min(1,this.productProgress/this.productTime));\n        this?.snd_collect?.play?.();\n        return true;\n    }    \n}\n\n","import config from '../config.js';\nimport bus from '../tools/tool.events.bus.js'\nimport EntityAnimal from \"../components/class.entity.animal.component.js\";\nimport FoodStatus from \"../components/class.entity.food.status.component.js\";\nimport ProductStatus from \"../components/class.entity.product.status.component.js\";\n\n\n// ловим событие 'core.preload' и производим \n// предзагрузку необходимых на данной стадии ресурсов\nbus.once('core.preload', core => {\n    console.log('core.preload', 'EntityChicken');\n\n    core.load.atlas('entity_chicken',\n        config.gamePath + 'sprites/entity/icons_chicken.png',\n        config.gamePath + 'sprites/entity/icons_chicken.json'\n    );\n\n    core.load.audio('snd_chicken_feed1', config.gamePath + 'sounds/snd_chicken_feed1.mp3');\n    core.load.audio('snd_chicken_feed2', config.gamePath + 'sounds/snd_chicken_feed2.mp3');\n    core.load.audio('snd_collect_egg', config.gamePath + 'sounds/snd_collect_egg.mp3');\n\n});\n\n\n\n\n\nexport default class EntityChicken extends EntityAnimal {\n    constructor(game, parent, name = 'EntityChicken', addToStage, enableBody, physicsBodyType) {\n        super(game, parent, name, addToStage, enableBody, physicsBodyType);\n    }\n\n    /**\n     * НЕСТАНДАРТНЫЙ метод функционал которого добавлен в `extend.component.class.js`)\n     * так как класс компонента наследуется от Phaser.Group то\n     * использовать create для инициализации мы не можем, так\n     * как у Phaser.Group уже есть метод create\n     */\n    make() {\n        super.make();\n\n        // имя существа\n        this.entityName = 'chicken';\n\n        // автосбор продукта\n        this.autoCollect = true;\n\n        // ограничения таймеров\n        this.foodTime = 30000;\n        this.productTime = 10000;\n\n        // звук нажатия на иконку\n        this.snd_collect = this.game.add.audio('snd_collect_egg');\n        this.snd_feed = this.game.add.audio('snd_chicken_feed1');\n\n\n        // создаем спрайт курицы\n        this.sprite = new Phaser.Sprite(this.game, 0, 15, 'entity_chicken', 'chicken_default');\n        this.sprite.anchor.set(0.5, 0.25);\n        this.sprite.scale.set(0.12);\n        this.addChild(this.sprite);\n\n        \n        this.productStatus = new ProductStatus(this.game, this);\n        this.productStatus.position.set(-10, 5);\n\n        this.foodStatus = new FoodStatus(this.game, this);\n        this.foodStatus.position.set(-10, -5);\n    }\n\n    /**\n     * стандартный метод класса Phaser.Group\n     * https://photonstorm.github.io/phaser-ce/Phaser.State.html#update\n     */\n    update(game) {\n        super.update(game);\n    }\n}\n\n","import config from '../config.js';\nimport bus from '../tools/tool.events.bus.js'\nimport EntityAnimal from \"../components/class.entity.animal.component.js\";\nimport FoodStatus from \"../components/class.entity.food.status.component.js\";\nimport ProductStatus from \"../components/class.entity.product.status.component.js\";\n\n\n// ловим событие 'core.preload' и производим \n// предзагрузку необходимых на данной стадии ресурсов\nbus.once('core.preload', core => {\n    console.log('core.preload', 'EntityCow');\n\n    core.load.atlas('entity_cow',\n        config.gamePath + 'sprites/entity/icons_cow.png',\n        config.gamePath + 'sprites/entity/icons_cow.json'\n    );\n\n    core.load.atlas('icons_state',\n        config.gamePath + 'sprites/entity/icons_state.png',\n        config.gamePath + 'sprites/entity/icons_state.json'\n    );\n\n    core.load.audio('snd_cow_feed1', config.gamePath + 'sounds/snd_cow_feed1.mp3');\n    core.load.audio('snd_cow_feed2', config.gamePath + 'sounds/snd_cow_feed2.mp3');\n    core.load.audio('snd_collect_milk', config.gamePath + 'sounds/snd_collect_milk.mp3');\n\n});\n\n\n\n\n\nexport default class EntityCow extends EntityAnimal {\n    constructor(game, parent, name, addToStage, enableBody, physicsBodyType) {\n        super(game, parent, 'EntityCow', addToStage, enableBody, physicsBodyType);\n    }\n\n    /**\n     * НЕСТАНДАРТНЫЙ метод функционал которого добавлен в `extend.component.class.js`)\n     * так как класс компонента наследуется от Phaser.Group то\n     * использовать create для инициализации мы не можем, так\n     * как у Phaser.Group уже есть метод create\n     */\n    make() {\n        super.make();\n\n        // имя существа\n        this.entityName = 'cow';\n\n        // автосбор продукта\n        this.autoCollect = true;\n\n        // ограничения таймеров\n        this.foodTime = 20000;\n        this.productTime = 20000;\n\n        // звук нажатия на иконку\n        this.snd_collect = this.game.add.audio('snd_collect_milk');\n        this.snd_feed = this.game.add.audio('snd_cow_feed1');\n        this.snd_feed.volume = 0.5;\n\n        // создаем спрайт коровы\n        this.sprite = new Phaser.Sprite(this.game, 0, 10, 'entity_cow', 'cow_default');\n        this.sprite.anchor.set(0.5, 0.35);\n        this.sprite.scale.set(0.18);\n        this.addChild(this.sprite);\n\n        this.productStatus = new ProductStatus(this.game, this);\n        this.productStatus.position.set(-10, -8);\n\n        this.foodStatus = new FoodStatus(this.game, this);\n        this.foodStatus.position.set(-10, -18);\n    }\n\n\n    /**\n     * стандартный метод класса Phaser.Group\n     * https://photonstorm.github.io/phaser-ce/Phaser.State.html#update\n     */\n    update(game) {\n        super.update(game);\n    }\n\n}\n\n","import config from '../config.js';\nimport bus from '../tools/tool.events.bus.js'\nimport Component from \"../phaser.extends/extend.component.class.js\";\n\n// ловим событие 'core.preload' и производим \n// предзагрузку необходимых на данной стадии ресурсов\nbus.once('core.preload', core => {\n    console.log('core.preload', 'FoodStatus');\n    core.load.atlas('icons_state',\n        config.gamePath + 'sprites/entity/icons_state.png',\n        config.gamePath + 'sprites/entity/icons_state.json'\n    );\n\n    core.load.bitmapFont('fnt_20',\n        config.gamePath + 'fonts/fnt_20.png',\n        config.gamePath + 'fonts/fnt_20.xml'\n    );    \n\n});\n\n\nexport default class FoodStatus extends Component {\n    constructor(game, parent, name='FoodStatus', addToStage, enableBody, physicsBodyType) {\n        console.log('FoodStatus.constructor()',1);\n        super(game, parent, name, addToStage, enableBody, physicsBodyType);\n        console.log('FoodStatus.constructor()',2);\n    }\n\n    /**\n     * НЕСТАНДАРТНЫЙ метод функционал которого добавлен в `extend.component.class.js`)\n     * так как класс компонента наследуется от Phaser.Group то\n     * использовать create для инициализации мы не можем, так\n     * как у Phaser.Group уже есть метод create\n     */\n    make() {\n        // спрайты статуса\n        this.statusSprite = new Phaser.Sprite(this.game, 0, 0, 'icons_state', 'wheat');\n        this.statusSprite.anchor.set(0.5, 0.5);\n        this.statusSprite.scale.set(0.1);\n        this.statusSprite.alpha = 0.8;\n        this.statusSprite.smoothed = false;\n        this.addChild(this.statusSprite);\n\n        this.statusText = new Phaser.BitmapText(this.game, 20, 0, 'fnt_20', '', 40);\n        this.statusText.anchor.set(0.5, 0.15);\n        this.statusText.scale.set(2.5);\n        this.statusText.alpha = 0.7;\n        this.statusText.smoothed = false;\n        // this.statusText.text = 0;\n        this.setStaus(0, 0)\n        this.addChild(this.statusText);\n    }\n    \n    setStaus(progress, counter){\n        this.statusText.text = counter;\n    }\n\n}\n\n","import config from '../config.js';\nimport bus from '../tools/tool.events.bus.js'\nimport Component from \"../phaser.extends/extend.component.class.js\";\n\n// ловим событие 'core.preload' и производим \n// предзагрузку необходимых на данной стадии ресурсов\nbus.once('core.preload', core => {\n    console.log('core.preload', 'ProductStatus');\n    core.load.spritesheet('loading_bar', config.gamePath + 'sprites/preloader/bar.png', 18, 10, 3);\n});\n\n\nexport default class ProductStatus extends Component {\n    constructor(game, parent, name = 'ProductStatus', addToStage, enableBody, physicsBodyType) {\n        console.log('ProductStatus.constructor()', 1);\n        super(game, parent, name, addToStage, enableBody, physicsBodyType);\n        console.log('ProductStatus.constructor()', 2);\n    }\n\n    /**\n     * НЕСТАНДАРТНЫЙ метод функционал которого добавлен в `extend.component.class.js`)\n     * так как класс компонента наследуется от Phaser.Group то\n     * использовать create для инициализации мы не можем, так\n     * как у Phaser.Group уже есть метод create\n     */\n    make() {\n        // спрайты статуса\n        const width = 60;\n        const height = 5;\n        // отрисовываем статусбар загрузки\n        this.barBackSprite = new Phaser.TileSprite(this.game, 11 - width / 2, -height / 2, width, height, 'loading_bar', 1);\n        this.barBackSprite.anchor.set(0, 0.5);\n        this.barBackSprite.tint = 0x000000;\n        this.barBackSprite.alpha = 0.4;\n        this.barBackSprite.scale.set(1, height / 10);\n        this.addChild(this.barBackSprite);\n\n        this.barSprite = new Phaser.TileSprite(this.game, 11 - width / 2, -height / 2, width, height, 'loading_bar', 2);\n        this.barSprite.anchor.set(0, 0.5);\n        // this.barSprite.tint = 0x5555ff;\n        this.barSprite.alpha = 0.6;\n        this.barSprite.scale.set(1, height / 10);\n        this.setStaus(0);\n        this.addChild(this.barSprite);\n\n\n        // this.statusSprite = new Phaser.Sprite(this.game, 0, 0, 'icons_state', 'wheat');\n        // this.statusSprite.anchor.set(0.5, 0.5);\n        // this.statusSprite.scale.set(0.1);\n        // this.statusSprite.alpha = 0.8;\n        // this.statusSprite.smoothed = false;\n        // this.addChild(this.statusSprite);\n\n        // this.statusText = new Phaser.BitmapText(this.game, 20, 0, 'fnt_20', '', 40);\n        // this.statusText.anchor.set(0.5, 0.15);\n        // this.statusText.scale.set(2.5);\n        // this.statusText.alpha = 0.7;\n        // this.statusText.smoothed = false;\n        // // this.statusText.text = 0;\n\n        // this.addChild(this.statusText);\n    }\n\n    setStaus(progress) {\n        this.barSprite.width = this.barBackSprite.width * progress;\n    }\n\n}\n\n","import config from '../config.js';\nimport bus from '../tools/tool.events.bus.js'\nimport EntityBase from \"../components/class.entity.base.component.js\";\nimport ProductStatus from \"../components/class.entity.product.status.component.js\";\n\n\n// ловим событие 'core.preload' и производим \n// предзагрузку необходимых на данной стадии ресурсов\nbus.once('core.preload', core => {\n    console.log('core.preload', 'EntityWheat');\n\n    core.load.atlas('entity_wheat',\n        config.gamePath + 'sprites/tileset_wheat.png',\n        config.gamePath + 'sprites/tileset_wheat.json'\n    );\n    core.load.audio('snd_collect_wheat', config.gamePath + 'sounds/snd_collect_wheat.mp3');\n\n});\n\n\n\n\n\nexport default class EntityWheat extends EntityBase {\n    constructor(game, parent, name='EntityWheat', addToStage, enableBody, physicsBodyType) {\n        super(game, parent, name, addToStage, enableBody, physicsBodyType);\n    }\n\n    /**\n     * НЕСТАНДАРТНЫЙ метод функционал которого добавлен в `extend.component.class.js`)\n     * так как класс компонента наследуется от Phaser.Group то\n     * использовать create для инициализации мы не можем, так\n     * как у Phaser.Group уже есть метод create\n     * Для компонентов унаследованных от ComponentSingleton\n     * метод make вызывается ОДИН раз при первом создании компонента     \n     */\n    make() {\n        super.make();\n\n        this.updateOnlyExistingChildren = true;\n\n        // имя существа\n        this.entityName = 'chicken';\n\n        // ограничения таймеров\n        this.productTime = 10000;\n\n        // звук нажатия на иконку\n        this.snd_collect = this.game.add.audio('snd_collect_wheat');\n\n        this.sector = ('00' + Math.floor(1 + Math.random() * 8)).substr(-2);\n\n\n        // создаем спрайты\n        this.sprites = Array(8).fill(null).map((_, index) => {\n            const progress = ('00' + index).substr(-2);\n            const frameName = `wheat.${progress}.${this.sector}`\n\n            const isCurrent = index === Math.floor(8 * this.productProgress / this.productTime);\n\n            const sprite = new Phaser.Sprite(this.game, 0, 10, 'entity_wheat', frameName);\n            sprite.anchor.set(0.5, 0.75);\n            sprite.scale.set(0.5, 0.5);\n            sprite.visible = isCurrent;\n            sprite.exists = isCurrent;\n            this.addChild(sprite);\n\n            if (isCurrent) this.sprite = sprite;\n            return sprite\n        })\n\n        this.productStatus = new ProductStatus(this.game, this);\n        this.productStatus.position.set(-10, 5);        \n    }\n\n    /**\n     * стандартный метод класса Phaser.Group\n     * https://photonstorm.github.io/phaser-ce/Phaser.State.html#update\n     */\n     update(game) {\n        super.update(game);\n\n        const progress = Math.min(7, Math.floor(8 * this.productProgress / this.productTime))\n\n        if (this.sprite) {\n            this.sprite.visible = false;\n            this.sprite.exists = false;\n        }\n\n        this.sprite = this.sprites[progress]\n\n        if (this.sprite) {\n            this.sprite.visible = true;\n            this.sprite.exists = true;\n        }\n    }\n}\n\n","import config from '../config.js';\nimport bus from '../tools/tool.events.bus.js'\nimport Component from \"../phaser.extends/extend.component.class.js\";\nimport ComponentSingleton from \"../phaser.extends/extend.component.singleton.class.js\";\nimport Keyboard from '../tools/class.keyboard.js';\nimport Crosshair from '../components/class.crosshair.component.js'\nimport entities from '../components/index.entity.components.js'\n\n// ловим событие 'core.preload' и производим \n// предзагрузку необходимых на данной стадии ресурсов\nbus.once('core.preload', core => {\n    console.log('core.preload', 'GameEntityGui');\n\n    core.load.image('icons_plate', config.gamePath + 'sprites/plates/icons_plate.png');\n\n    core.load.atlas('icons_chicken',\n        config.gamePath + 'sprites/entity/icons_chicken.png',\n        config.gamePath + 'sprites/entity/icons_chicken.json'\n    );\n    core.load.atlas('icons_cow',\n        config.gamePath + 'sprites/entity/icons_cow.png',\n        config.gamePath + 'sprites/entity/icons_cow.json'\n    );\n    core.load.atlas('icons_wheat',\n        config.gamePath + 'sprites/entity/icons_wheat.png',\n        config.gamePath + 'sprites/entity/icons_wheat.json'\n    );\n    core.load.audio('snd_entity_button', config.gamePath + 'sounds/snd_entity_button.mp3');\n\n});\n\n\nexport default class GameEntityGui extends ComponentSingleton {\n    constructor(game, parent, name, addToStage, enableBody, physicsBodyType) {\n        super(game, parent, 'GameEntityGui', addToStage, enableBody, physicsBodyType);\n    }\n\n    make() {\n        // так как класс компонента наследуется от Phaser.Group то\n        // использовать create для инициализации мы не можем, так\n        // как у Phaser.Group уже есть метод create\n        // Для компонентов унаследованных от ComponentSingleton\n        // метод make вызывается ОДИН раз при первом создании компонента        \n        console.log('Component.make', 'GameEntityGui');\n\n        // this.position.set(config.center.x, config.center.y + 70)\n\n        // подключаем курсор (является сингтоном)\n        this.crosshair = new Crosshair(this.game);\n\n\n        // звук нажатия на иконку\n        this.snd_button = this.game.add.audio('snd_entity_button');\n\n        // создаем плашку под иконки\n        this.plateSprite = new Phaser.Sprite(this.game, -25, 0, 'icons_plate');\n        this.plateSprite.anchor.set(0, 0);\n        this.plateSprite.scale.set(0.8, 0.8);\n        this.plateSprite.alpha = 0.75;\n        this.addChild(this.plateSprite);\n\n        // создаем иконки\n        this.icons = Object.keys(entities).reduce((a, n, i) => {\n            const spriteName = 'icons_' + n;\n\n            const crosshair = new Phaser.Sprite(this.game, 0, 0, spriteName);\n            crosshair.anchor.set(0.5, 0.5);\n            crosshair.scale.set(0.1);\n            crosshair.alpha = 0.6;\n            crosshair.smoothed = false;\n            this.crosshair.addCrosshair(n, crosshair);\n\n\n            const sprite = new Phaser.Button(\n                this.game,\n                50, 75 + i * 100,\n                spriteName,\n                (button, pointer) => { this.onIconPress(n, button, pointer); },\n                this,\n                `${n}_over`, `${n}_up`, `${n}_down`, `${n}_up`\n            );\n            sprite.input.useHandCursor = false;\n            sprite.anchor.set(0.5, 0.5);\n            sprite.scale.set(0.2);\n            sprite.alpha = 0.8;\n            sprite.smoothed = false;\n            this.addChild(sprite);\n\n\n\n\n            a[n] = {\n                sprite,\n                // shadow,\n            };\n            return a;\n        }, {})\n\n\n    }\n\n    update(game) {\n        // const elapsed = game.time.elapsedMS;\n        // const timer = game.time.time;\n        if(!this.game.input.activePointer.rightButton.isDown) return;\n        if(!entities[this.crosshair.crosshairName]) return;\n        this.crosshair.setCrosshair('arrow');\n    }\n\n    paused() {\n        console.log('!!!!!!!! Component.paused', 'GameEntityGui');\n    }\n\n    resumed() {\n        console.log('!!!!!!!! Component.resumed', 'GameEntityGui');\n    }\n\n    onIconPress(name, button, pointer) {\n        this.snd_button.play();\n        this.crosshair.setCrosshair(name);\n\n    }\n}\n\n","import config from '../config.js';\nimport bus from '../tools/tool.events.bus.js'\nimport Component from \"../phaser.extends/extend.component.class.js\";\nimport ComponentSingleton from \"../phaser.extends/extend.component.singleton.class.js\";\nimport Keyboard from '../tools/class.keyboard.js';\n\n\nbus.once('core.preload', core => {\n    console.log('core.preload', 'GameEnviromentGui');\n    core.load.atlas('tileset_grass',\n        config.gamePath + 'sprites/tileset_grass.png',\n        config.gamePath + 'sprites/tileset_grass.json'\n    );\n    core.load.atlas('tileset_tree',\n        config.gamePath + 'sprites/tileset_tree.png',\n        config.gamePath + 'sprites/tileset_tree.json'\n    );\n    core.load.atlas('tileset_field',\n        config.gamePath + 'sprites/tileset_field.png',\n        config.gamePath + 'sprites/tileset_field.json'\n    );\n\n});\n\n\n\nexport default class GameEnviromentGui extends Component {\n    constructor(game, parent, name, addToStage, enableBody, physicsBodyType) {\n        super(game, parent, 'GameEnviromentGui', addToStage, enableBody, physicsBodyType);\n    }\n\n    make() {\n        // так как класс компонента наследуется от Phaser.Group то\n        // использовать create для инициализации мы не можем, так\n        // как у Phaser.Group уже есть метод create\n        console.log('Component.make', 'GameEnviromentGui');\n\n        // создаем графические элементы сцены\n        const size = 1.1;\n        const width = size * config.width / 17;\n        const height = size * config.height / 17;\n\n\n        for (let y = 0; y <= config.height + height; y += height) {\n            for (let x = 0; x <= config.width + width; x += width) {\n                const wy = y - config.center.y * 1.5;\n                const wx = x - config.center.x;\n                const dist = Math.hypot(wx, wy * 1.25);\n                let tilesSet = 'forest';\n                if (dist < 650) tilesSet = 'dry';\n                if (dist < 550) tilesSet = 'far';\n                if (dist < 450) tilesSet = 'near';\n\n                const spriteData = getSpriteInfo(tilesSet)\n\n                const sprite = new Phaser.Sprite(\n                    this.game,\n                    x + width * 0.2 * (Math.random() - 0.5),\n                    y + height * 0.2 * (Math.random() - 0.5),\n                    spriteData.spriteName\n                );\n                sprite.frameName = spriteData.frameName;\n                sprite.anchor.set(0.5, 0.75);\n                sprite.scale.set(size * 0.49);\n                this.addChild(sprite);\n            }\n        }\n    }\n\n    update(game) {\n        const elapsed = game.time.elapsedMS;\n        const timer = game.time.time;\n    }\n\n    paused() {\n        console.log('!!!!!!!! Component.paused', 'GameEnviromentGui');\n    }\n\n    resumed() {\n        console.log('!!!!!!!! Component.resumed', 'GameEnviromentGui');\n    }\n\n}\n\n\n\nfunction getSpriteInfo(presetName) {\n    const tilesPreset = tilesPresets[presetName];\n    const keys = Object.keys(tilesPreset);\n    const amount = keys.reduce((acc, key) => acc += tilesPreset[key], 0);\n    const r = Math.random() * amount;\n    let tilesetName;\n    let count = 0;\n    keys.some(key => {\n        count += tilesPreset[key];\n        if (count > r) tilesetName = key\n        return !!tilesetName;\n    });\n    const data = tilesPresetsData[tilesetName];\n    return {\n        ...data,\n        frameName: data.frames[Math.floor(data.frames.length * Math.random())]\n    }\n\n}\n\n\n\n\n\n// пресеты спрайтов\nvar tilesPresets = {\n    near: {\n        // nearfield: 1,\n        greengrass: 1,\n    },\n    far: {\n        greengrass: 2,\n        drygrass: 1,\n    },\n    dry: {\n        // greengrass: 3,\n        stounegrass: 1,\n        drygrass: 2,\n    },\n    forest: {\n        greengrass: 1,\n        stounegrass: 1,\n        drygrass: 2,\n        pinetree: 6,\n        aldertree: 2,\n    },\n}\n\n\n// наборы спрайтов\nvar tilesPresetsData = {\n    pinetree: {\n        spriteName: 'tileset_tree',\n        frames: [\n            'tree.pine.middle.00.1', 'tree.pine.middle.00.2', 'tree.pine.middle.00.3', 'tree.pine.middle.00.4',\n            'tree.pine.middle.01.1', 'tree.pine.middle.01.2', 'tree.pine.middle.01.3', 'tree.pine.middle.01.4',\n            'tree.pine.small.01.1', 'tree.pine.small.01.2', 'tree.pine.small.01.3', 'tree.pine.small.01.4',\n        ]\n    },\n    aldertree: {\n        spriteName: 'tileset_tree',\n        frames: [\n            'tree.alder.middle.00.1', 'tree.alder.middle.00.2', 'tree.alder.middle.00.3', 'tree.alder.middle.00.4',\n            'tree.alder.middle.01.1', 'tree.alder.middle.01.2', 'tree.alder.middle.01.3', 'tree.alder.middle.01.4',\n            'tree.alder.small.00.1', 'tree.alder.small.00.2', 'tree.alder.small.00.3', 'tree.alder.small.00.4',\n            'tree.alder.small.01.1', 'tree.alder.small.01.2', 'tree.alder.small.01.3', 'tree.alder.small.01.4',\n        ]\n    },\n    stounegrass: {\n        spriteName: 'tileset_grass',\n        frames: [\n            'grass.stone.type.00.1', 'grass.stone.type.00.2', 'grass.stone.type.00.3', 'grass.stone.type.00.4',\n            'grass.stone.type.01.1', 'grass.stone.type.01.2', 'grass.stone.type.01.3', 'grass.stone.type.01.4',\n            'grass.stone.type.02.1', 'grass.stone.type.02.2', 'grass.stone.type.02.3', 'grass.stone.type.02.4',\n            'grass.stone.type.03.1', 'grass.stone.type.03.2', 'grass.stone.type.03.3', 'grass.stone.type.03.4',\n        ]\n    },    \n    drygrass: {\n        spriteName: 'tileset_grass',\n        frames: [\n            'grass.dry.type.00.1', 'grass.dry.type.00.2', 'grass.dry.type.00.3', 'grass.dry.type.00.4',\n            'grass.dry.type.01.1', 'grass.dry.type.01.2', 'grass.dry.type.01.3', 'grass.dry.type.01.4',\n            'grass.dry.type.02.1', 'grass.dry.type.02.2', 'grass.dry.type.02.3', 'grass.dry.type.02.4',\n            'grass.dry.type.03.1', 'grass.dry.type.03.2', 'grass.dry.type.03.3', 'grass.dry.type.03.4',\n            'grass.dry.type.04.1', 'grass.dry.type.04.2', 'grass.dry.type.04.3', 'grass.dry.type.04.4',\n            'grass.dry.type.05.1', 'grass.dry.type.05.2', 'grass.dry.type.05.3', 'grass.dry.type.05.4',\n            'grass.dry.type.06.1', 'grass.dry.type.06.2', 'grass.dry.type.06.3', 'grass.dry.type.06.4',\n            // 'grass.dry.type.07.1',    'grass.dry.type.07.2',    'grass.dry.type.07.3',    'grass.dry.type.07.4',\n            // 'grass.dry.type.08.1',    'grass.dry.type.08.2',    'grass.dry.type.08.3',    'grass.dry.type.08.4',\n            'grass.dry.type.09.1', 'grass.dry.type.09.2', 'grass.dry.type.09.3', 'grass.dry.type.09.4',\n        ]\n    },\n    greengrass: {\n        spriteName: 'tileset_grass',\n        frames: [\n            'grass.type.00.1', 'grass.type.00.2', 'grass.type.00.3', 'grass.type.00.4',\n            // 'grass.type.01.1',    // 'grass.type.01.2',    // 'grass.type.01.3',    // 'grass.type.01.4',\n            'grass.type.02.1', 'grass.type.02.2', 'grass.type.02.3', 'grass.type.02.4',\n            'grass.type.03.1', 'grass.type.03.2', 'grass.type.03.3', 'grass.type.03.4',\n            // 'grass.type.04.1',    'grass.type.04.2',    'grass.type.04.3',    'grass.type.04.4',\n            'grass.type.05.1', 'grass.type.05.2', 'grass.type.05.3', 'grass.type.05.4',\n            'grass.type.06.1', 'grass.type.06.2', 'grass.type.06.3', 'grass.type.06.4',\n            // 'grass.type.07.1',    'grass.type.07.2',    'grass.type.07.3',    'grass.type.07.4',\n            'grass.type.08.1', 'grass.type.08.2', 'grass.type.08.3', 'grass.type.08.4',\n            'grass.type.09.1', 'grass.type.09.2', 'grass.type.09.3', 'grass.type.09.4',\n            'grass.type.10.1', 'grass.type.10.2', 'grass.type.10.3', 'grass.type.10.4',\n        ]\n    }\n}","import config from '../config.js';\nimport bus from '../tools/tool.events.bus.js'\nimport Component from \"../phaser.extends/extend.component.class.js\";\nimport ComponentSingleton from \"../phaser.extends/extend.component.singleton.class.js\";\nimport Keyboard from '../tools/class.keyboard.js';\nimport Crosshair from '../components/class.crosshair.component.js'\nimport entities from '../components/index.entity.components.js'\n\n\n\n// ловим событие 'core.preload' и производим \n// предзагрузку необходимых на данной стадии ресурсов\nbus.once('core.preload', core => {\n    console.log('core.preload', 'GameWorldGui');\n\n    core.load.image('fade_black', config.gamePath + 'sprites/buttons/fade.black.png');\n    core.load.audio('snd_entity_set', config.gamePath + 'sounds/snd_entity_set1.mp3');\n});\n\n\n\n\n\nexport default class GameWorldGui extends Component {\n    constructor(game, parent, name, addToStage, enableBody, physicsBodyType) {\n        super(game, parent, 'GameWorldGui', addToStage, enableBody, physicsBodyType);\n    }\n\n    /**\n     * НЕСТАНДАРТНЫЙ метод функционал которого добавлен в `extend.component.class.js`)\n     * так как класс компонента наследуется от Phaser.Group то\n     * использовать create для инициализации мы не можем, так\n     * как у Phaser.Group уже есть метод create\n     */\n    make() {\n        console.log('Component.make', 'GameWorldGui');\n\n        this.position.set(config.center.x, config.center.y + 100)\n\n        // подключаем курсор (является сингтоном)\n        this.crosshair = new Crosshair(this.game);\n\n        this.snd_entity_set = this.game.add.audio('snd_entity_set');\n\n        // создаем слои\n        this.layers = {\n            ceil: new Phaser.Group(this.game, this),\n            entity: new Phaser.Group(this.game, this),\n            fade: new Phaser.Group(this.game, this),\n        };\n\n        // создаем хранилище графических элементы сцены (ячеек фермы)\n        this.fields = Array(8).fill(null).map(\n            (a, y) => Array(8).fill(null).map(\n                (a, x) => {\n                    const xx = (x - 3.5) * 95;\n                    const yy = (y - 3.5) * 55;\n\n                    // спрайт затемнения каждой ячейки фермы\n                    const sprite = new Phaser.Sprite(this.game, xx, yy, 'fade_black', 0);\n                    sprite.anchor.set(0.5, 0.5);\n                    sprite.scale.set(3.2, 1.9);\n                    sprite.alpha = 0.15;\n                    sprite.tint = 0xd0d0b0;\n                    this.layers.ceil.addChild(sprite);\n\n                    // возвращаем данные ячейки\n                    const field = {\n                        x, y, // индексы ячейки в `this.fields`\n                        xx, yy, // координаты ячейки в слое\n                        ceil: sprite, // спрайт затемнения ячейки\n                    };\n\n                    return field;\n                }\n            )\n        );\n\n\n        // Прозрачный объект, накрывающий все поле. Нужен для перехвата событий\n        // нажатия на ячейки фермы. От установки обработчиков на каждую ячейку отказался \n        // по следующей причине:\n        // Спрайты используемые в ячейках отрендерены в разрешении 512х512 и имеют\n        // достаточно обширные пустые области, которые тем не менее попадают в boundbox\n        // в результате чего спрайты перекрывают друг друга и непредсказуемо \n        // срабатывают на нажатие. Обрезать спрайты сохранив привязку к правильному \n        // pivot-у задача не тривиальная и требующая большого объема ручной работы.\n        this.inputLayer = new Phaser.Button(\n            this.game, 0, 0, 'fade_black',\n            (button, pointer) => { this.onPress(button, pointer); }, this,\n            0, 0, 0, 0\n        );\n\n        this.inputLayer.input.useHandCursor = false;\n        this.inputLayer.scale.set(24, 14);\n        this.inputLayer.anchor.set(0.5, 0.5);\n        this.inputLayer.alpha = 0.0;\n        // this.inputLayer.visible = false;    \n        this.layers.fade.addChild(this.inputLayer);\n    }\n\n    /**\n     * стандартный метод класса Phaser.Group\n     * https://photonstorm.github.io/phaser-ce/Phaser.State.html#update\n     */\n    update(game) {\n        const elapsed = game.time.elapsedMS;\n        const timer = game.time.time;\n    }\n\n    /**\n     * обработчик нажатия на this.inputLayer\n     * @param {Phaser.Button} button иконка на которую произведен клик\n     * @param {Phaser.Pointr} pointer данные собития нажатия\n     * @returns \n     */\n    onPress(button, pointer) {\n        // переращитываем координаты клика в индексы для `this.fields`\n        const wx = pointer.x / config.scale.x;\n        const wy = pointer.y / config.scale.y;\n        const lx = wx - this.x + this.inputLayer.width / 2;\n        const ly = wy - this.y + this.inputLayer.height / 2;\n        const xx = Math.floor(lx * 8 / this.inputLayer.width);\n        const yy = Math.floor(ly * 8 / this.inputLayer.height);\n\n        // получаем данные ячейки фермы по которой был произведен клик\n        const field = this.fields?.[yy]?.[xx];\n        if (!field) return;\n\n        // если на панели сущностей выбрана одна из сущностей то получаем ее класс \n        const Entity = entities[this.crosshair.crosshairName]\n        if (Entity) {\n            // если на панели сущностей выбрана одна из сущностей\n\n            // если в ячейке фермы уже установлена сущность - удаляе ее\n            if (field.entity) field.entity.destroy()\n\n            field.entity = new Entity(this.game, this.layers.entity);\n            field.entity.position.set(field.xx, field.yy - 35);\n            field.entityName = this.crosshair.crosshairName;\n            field.entity.wx = wx;\n            field.entity.wy = wy;\n\n            // сортируем спрайты (нижние будут перекрывать верхние)\n            this.layers.entity.sort('y', Phaser.Group.SORT_ASCENDING);\n\n            this.snd_entity_set.play();\n        } else {\n            // если на панели сущностей НЕ выбрана ни одна из сущностей\n            // пытаемся собрать урожай)\n            if (field?.entity?.collect?.()) {\n                // и если получилось - отправляем данные в шину событий\n                bus.emit('entity.collect', {\n                    ...field,\n                    wx, wy\n                });\n            } else {\n                // или покормить\n                bus.emit('entity.feed', 'wheat', 1, field.entity);\n            }\n        }\n    }\n}\n","import config from '../config.js';\nimport bus from '../tools/tool.events.bus.js'\nimport Component from \"../phaser.extends/extend.component.class.js\";\nimport ComponentSingleton from \"../phaser.extends/extend.component.singleton.class.js\";\nimport Keyboard from '../tools/class.keyboard.js';\nimport Crosshair from '../components/class.crosshair.component.js'\nimport entities from '../components/index.entity.components.js'\nimport { Vector2 } from '../tools/class.vector.js'\n\n// ловим событие 'core.preload' и производим \n// предзагрузку необходимых на данной стадии ресурсов\nbus.once('core.preload', core => {\n    console.log('core.preload', 'GameStateGui');\n    core.load.image('icons_plate', config.gamePath + 'sprites/plates/icons_plate.png');\n\n    core.load.atlas('icons_state',\n        config.gamePath + 'sprites/entity/icons_state.png',\n        config.gamePath + 'sprites/entity/icons_state.json'\n    );\n\n    core.load.bitmapFont('fnt_20',\n        config.gamePath + 'fonts/fnt_20.png',\n        config.gamePath + 'fonts/fnt_20.xml'\n    );\n\n    core.load.audio('snd_money', config.gamePath + 'sounds/snd_money.mp3');\n\n});\n\n\n\nexport default class GameStateGui extends ComponentSingleton {\n    constructor(game, parent, name, addToStage, enableBody, physicsBodyType) {\n        super(game, parent, 'GameStateGui', addToStage, enableBody, physicsBodyType);\n    }\n\n    /**\n     * НЕСТАНДАРТНЫЙ метод функционал которого добавлен в `extend.component.class.js`)\n     * так как класс компонента наследуется от Phaser.Group то\n     * использовать create для инициализации мы не можем, так\n     * как у Phaser.Group уже есть метод create\n     * Для компонентов унаследованных от ComponentSingleton\n     * метод make вызывается ОДИН раз при первом создании компонента     \n     */\n    make() {\n\n        console.log('Component.make', 'GameStateGui');\n\n        // this.position.set(config.center.x, config.center.y + 70)\n\n        // соответствие сущьностей и ресурсов\n        this.entityNames = {\n            wheat: 'wheat',\n            chicken: 'egg',\n            cow: 'milk',\n            gold: 'gold'\n        };\n\n        // названия иконок\n        this.iconNames = Object.values(this.entityNames);\n\n        // анимируемые элементы (при сборе летят с поля к панели статуса)\n        this.collectedElements = [];\n\n        // кеш для созданных спрайтов, чтобы не пересоздавать их\n        this.collectedSpriteCache = this.iconNames.reduce((a, n) => {\n            a[n] = [];\n            return a\n        }, {});\n\n        // подключаем курсор (является сингтоном)\n        this.crosshair = new Crosshair(this.game);\n\n        // звук нажатия на иконку\n        this.snd_money = this.game.add.audio('snd_money');\n\n        // создаем плашку под иконки\n        this.plateSprite = new Phaser.Sprite(this.game, 0, 0, 'icons_plate');\n        this.plateSprite.anchor.set(0.5, 0.5);\n        this.plateSprite.angle = 90;\n        this.plateSprite.scale.set(-0.8, 1.0);\n        this.plateSprite.alpha = 0.85;\n        this.addChild(this.plateSprite);\n\n        // создаем иконки\n\n        this.icons = this.iconNames.reduce((a, frameName, i) => {\n\n            let sprite;\n            if (frameName !== 'gold') {\n                sprite = new Phaser.Button(\n                    this.game,\n                    -300 + i * 160, 30,\n                    'icons_state',\n                    (button, pointer) => {\n\n                        const item = this.icons[frameName];\n                        if (!item) return;\n                        if (item.counter < 1) return;\n                        item.counter --;\n                        item.amount.text = item.counter;\n\n                        this.snd_money.play();\n                        this.startCollectAnimation(\n                            this.x + i * 160 - 300,\n                            this.y + 30,\n                            'gold',\n                            Math.PI * 0.5\n                        );\n                    },\n                    this,\n                    frameName, frameName, frameName, frameName\n                );\n            } else {\n                sprite = new Phaser.Sprite(\n                    this.game,\n                    -300 + i * 160, 30,\n                    'icons_state', frameName\n                );\n            }\n\n            sprite.anchor.set(0.5, 0.5);\n            sprite.scale.set(0.3);\n            sprite.alpha = 0.8;\n            sprite.smoothed = false;\n            this.addChild(sprite);\n\n            const amount = new Phaser.BitmapText(\n                this.game,\n                -255 + i * 160, 30,\n                'fnt_20',\n                '',\n                40\n            );\n            amount.anchor.set(0.5, 0.15);\n            amount.scale.set(4);\n            amount.alpha = 0.7;\n            amount.smoothed = false;\n            amount.text = 0;\n            this.addChild(amount);\n\n\n            a[frameName] = {\n                frameName,\n                sprite,\n                amount,\n            };\n            return a;\n        }, {});\n\n        this.resetCounters();\n\n        // ловим событие сбора урожая\n        bus.on('entity.collect', field => {\n            console.log('collect', 1)\n            // field:\n            //   wx, wy, // координаты ячейки в пространстве разрешения игры (config.width,config.height)\n            //   entityName // наименование сущьности\n            const resourceName = this.entityNames[field.entityName];\n            if (!resourceName) return;\n            this.startCollectAnimation(\n                field.wx,\n                field.wy,\n                this.entityNames[field.entityName]\n            );\n        });\n\n        // ловим событие кормления животины\n        bus.on('entity.feed', (resourceName, amount, entity) => {\n            const item = this.icons[resourceName];\n            if (!item) return;\n            if (item.counter < amount) return;\n            if (!entity?.feed?.(amount)) return;\n            item.counter -= amount;\n            item.amount.text = item.counter;\n        });\n    }\n\n    /**\n     * обнуляет показания счетчиков\n     */\n    resetCounters() {\n        this.iconNames.forEach(iconName => {\n            const item = this.icons[iconName];\n            item.counter = 0;\n            item.amount.text = 0;\n        });\n\n    }\n\n    startCollectAnimation(fromX, fromY, name, angle) {\n        const target = this.icons[name];\n        if (!target) return;\n\n\n        // переводим координаты в координаты относительно места \n        // установки плашки с ресурсами\n        const x = fromX - this.x;\n        const y = fromY - this.y;\n\n        // создаем спрайт ресурса для анимации\n        let sprite;\n        if (this.collectedSpriteCache[name].length > 0) {\n            sprite = this.collectedSpriteCache[name].shift();\n            sprite.position.set(x, y);\n            sprite.visible = true;\n        } else {\n            sprite = new Phaser.Sprite(\n                this.game,\n                x, y,\n                'icons_state', name\n            );\n        }\n\n        sprite.anchor.set(0.5, 0.5);\n        sprite.scale.set(0.3);\n        sprite.alpha = 0.8;\n        sprite.smoothed = false;\n        sprite.targetOptions = {\n            name,\n            target,\n            velocity: new Vector2(angle ?? (Math.random() * Math.PI * 2), 4000, 'rad')\n        };\n        this.addChild(sprite);\n\n        this.collectedElements.push(sprite);\n\n    }\n\n    /**\n     * стандартный метод класса Phaser.Group\n     * https://photonstorm.github.io/phaser-ce/Phaser.State.html#update\n     */\n    update(game) {\n        const elapsed = game.time.elapsedMS;\n        // const timer = game.time.time;\n        this.collectedElements = this.collectedElements.filter(item => {\n            const options = item.targetOptions;\n            const target = item.targetOptions.target;\n            const dx = target.sprite.x - item.x;\n            const dy = target.sprite.y - item.y;\n            const distance = Math.hypot(dx, dy);\n            if (distance < 50 && item.distance < distance) {\n                target.counter++;\n                target.amount.text = target.counter;\n                item.visible = false;\n                this.removeChild(item);\n                this.collectedSpriteCache[options.name].push(item);\n                return false;\n            }\n            item.distance = distance;\n            const direction = (new Vector2(dx, dy));\n            options.velocity = options.velocity.multiply(0.9).add(direction);\n            const velocity = options.velocity.normalize().multiply(elapsed);\n            item.x += velocity.x;\n            item.y += velocity.y;\n            // console.log(options.velocity,direction,velocity)\n            return true;\n        })\n\n        if (!this.game.input.activePointer.rightButton.isDown) return;\n        if (!entities[this.crosshair.crosshairName]) return;\n        this.crosshair.setCrosshair('arrow');\n\n    }\n\n\n\n}\n\n","import config from '../config.js';\nimport bus from '../tools/tool.events.bus.js'\nimport ComponentSingleton from \"../phaser.extends/extend.component.singleton.class.js\";\n\nbus.once('core.boot.preload', core => {\n    // предзагрузка используемых для компонента ресурсов\n    console.log('core.boot.preload', 'IncorrectOrientation');\n\n    core.load.image('incorrect_orientation', config.gamePath + 'sprites/incorrect_orientation.png');\n});\n\n\nexport default class IncorrectOrientation extends ComponentSingleton {\n    constructor(game, parent, name, addToStage, enableBody, physicsBodyType) {\n        super(game, parent, 'IncorrectOrientation', addToStage, enableBody, physicsBodyType);\n    }\n\n    make() {\n        // так как класс компонента наследуется от Phaser.Group то\n        // использовать create для инициализации мы не можем, так\n        // как у Phaser.Group уже есть метод create\n        // Для компонентов унаследованных от ComponentSingleton\n        // метод make вызывается ОДИН раз при первом создании компонента        \n        console.log('Component.make', 'IncorrectOrientation');\n        // this.alpha = 0.7;\n        this.x = config.width / 2;\n        this.y = config.height / 2;\n\n        const state = this.game.state.getCurrentState();\n\n        this.backSpr = state.add.graphics(0, 0, this);\n        this.backSpr.anchor.set(0.5);\n        this.backSpr.beginFill(0xffffff, 1);\n        this.backSpr.drawRect(-0.5 * config.width, -0.5 * config.height, config.width, config.height);\n        this.backSpr.inputEnabled = true;\n\n        this.infoSpr = this.create(0, 0, 'incorrect_orientation');\n        this.infoSpr.anchor.set(0.5);\n\n        this.onGameSizeChange();\n\n        this.game.scale.onSizeChange.add(this.onGameSizeChange, this);\n    }\n\n    onGameSizeChange() {\n        var f = (this.game.scale.width >= this.game.scale.height);\n        console.log('IncorrectOrientation.onGameSizeChange', f);\n        this.visible = !f;\n\n        if (!this.infoSpr) return;\n\n        var sx = this.game.scale.scaleFactor.x;\n        var sy = this.game.scale.scaleFactor.y;\n\n        var s = 0.9 * this.game.scale.width / this.infoSpr.texture.frame.width;\n\n        this.infoSpr.scale.x = sx * s / config.scale.x;\n        this.infoSpr.scale.y = sy * s / config.scale.y;\n    }\n\n\n}","import config from '../config.js';\nimport bus from '../tools/tool.events.bus.js'\nimport Component from \"../phaser.extends/extend.component.class.js\";\nimport ComponentSingleton from \"../phaser.extends/extend.component.singleton.class.js\";\nimport Keyboard from '../tools/class.keyboard.js';\n\n\nbus.once('core.preload', core => {\n    console.log('core.preload', 'MainMenuGui');\n    core.load.bitmapFont('fnt_20',\n        config.gamePath + 'fonts/fnt_20.png',\n        config.gamePath + 'fonts/fnt_20.xml'\n    );\n\n    core.load.atlas('atlas_main_menu_gui',\n        config.gamePath + 'sprites/atlas_main_menu_gui.png',\n        config.gamePath + 'sprites/atlas_main_menu_gui.json'\n    );\n\n    core.load.audio('snd_menu_button', config.gamePath + 'sounds/snd_button.mp3');\n    core.load.audio('snd_skin_switch', config.gamePath + 'sounds/snd_betswitch.mp3');\n});\n\n\n\nexport default class MainMenuGui extends ComponentSingleton {\n    constructor(game, parent, name, addToStage, enableBody, physicsBodyType) {\n        super(game, parent, 'MainMenuGui', addToStage, enableBody, physicsBodyType);\n    }\n\n    make() {\n        // так как класс компонента наследуется от Phaser.Group то\n        // использовать create для инициализации мы не можем, так\n        // как у Phaser.Group уже есть метод create\n        // Для компонентов унаследованных от ComponentSingleton\n        // метод make вызывается ОДИН раз при первом создании компонента        \n        console.log('Component.make', 'MainMenuGui');\n\n        // создаем графические элементы сцены\n        this.snd_button = this.game.add.audio('snd_menu_button');\n        this.snd_button_switch = this.game.add.audio('snd_skin_switch');\n\n\n        this.x = config.width * 0.5;\n        // this.y = config.height * 0.5;\n        // this.alpha = 0.85;\n        this.scale.set(0.7);\n\n        this.playButton = new Phaser.Button(this.game, 0, 900, 'atlas_main_menu_gui', this.onPlayPressed, this, 'button_play_default', 'button_play_default', 'button_play_pressed', 'button_play_default');\n        this.addChild(this.playButton);\n        this.playButton.scale.y = 1.2;\n        this.playButton.anchor.set(0.5);\n\n        // this.plussButton = new Phaser.Button(this.game, -215, 120, 'atlas_main_menu_gui', this.onSwitchSkinLeftPressed, this, 'button_prev_default', 'button_prev_default', 'button_prev_pressed', 'button_prev_default');\n        // this.addChild(this.plussButton);\n        // this.plussButton.anchor.set(0.5);\n\n        // this.minusButton = new Phaser.Button(this.game, 215, 120, 'atlas_main_menu_gui', this.onSwitchSkinRightPressed, this, 'button_next_default', 'button_next_default', 'button_next_pressed', 'button_next_default', this);\n        // this.addChild(this.minusButton);\n        // this.minusButton.anchor.set(0.5);\n\n        // this.frameSprite = this.create(1, 122, 'atlas_main_menu_gui', 'frame_simple');\n        // this.frameSprite.anchor.set(0.5);\n\n        // this.skinText = new Phaser.BitmapText(this.game, 0, 122, 'fnt_20', '', 100);\n        // this.skinText.anchor.set(0.5, 0.15);\n        // this.skinText.scale.set(4);\n        // this.skinText.smoothed = false;\n        // this.addChild(this.skinText);\n\n\n        this.keyboard = new Keyboard({\n            // ARROWLEFT: this.onSwitchSkinLeftPressed,\n            // ARROWRIGHT: this.onSwitchSkinRightPressed,\n            ENTER: this.onPlayPressed,\n            SPACE: this.onPlayPressed,\n        }, this);\n    }\n\n    init() {\n        // метод init вызывается после метода make при создании компонента                \n        console.log('Component.init', 'MainMenuGui');\n\n        // инициализируем текущее состояние\n        // this.skins = ['skin1','skin2','skin3'];\n        // this.skinIndex = 0;\n\n        // this.skinText.text = this.skins[this.skinIndex];\n        this.keyboard.start();\n    }\n\n    update(game) {\n        // const elapsed = game.time.elapsedMS;\n        // const timer = game.time.timeExpected;\n\n        // this.yoyo = ((this?.yoyo ?? 1) + elapsed / 10000) % 2;\n        // const scale = Math.abs(this.yoyo - 1) / 10;\n\n        // this.scale.set(0.67 + scale);\n    }\n\n    paused() {\n        console.log('!!!!!!!! Component.paused', 'MainMenuGui');\n        this.keyboard.stop();\n    }\n\n    resumed() {\n        console.log('!!!!!!!! Component.resumed', 'MainMenuGui');\n        this.keyboard.start();\n    }\n\n    onPlayPressed() {\n        console.log('MainMenuGui.onPlayPressed');\n        this.snd_button.play();\n        this.game.state.start('GameState');\n    }\n\n    // onSwitchSkinLeftPressed() {\n    //     console.log('MainMenuGui.onSwitchSkinLeftPressed');\n\n    //     this.skinIndex = (this.skins.length+this.skinIndex-1)%this.skins.length;\n    //     this.snd_button_switch.play();\n    //     console.log('!!!!!!!!!!! <<<', this.skinIndex, this.skins[this.skinIndex])\n    //     this.skinText.text = this.skins[this.skinIndex];\n    // }\n\n    // onSwitchSkinRightPressed() {\n    //     console.log('MainMenuGui.onSwitchSkinRightPressed');\n\n    //     this.skinIndex = (this.skins.length+this.skinIndex+1)%this.skins.length;\n    //     this.snd_button_switch.play();\n    //     console.log('!!!!!!!!!!! >>>', this.skinIndex, this.skins[this.skinIndex])\n    //     this.skinText.text = this.skins[this.skinIndex];\n    // }\n\n}","import config from '../config.js';\nimport bus from '../tools/tool.events.bus.js'\nimport Component from \"../phaser.extends/extend.component.class.js\";\nimport ComponentSingleton from \"../phaser.extends/extend.component.singleton.class.js\";\n\n\n\nbus.once('core.boot.preload', core => {\n    console.log('core.boot.preload', 'StaticBacground');\n    core.load.image('loading_back', config.gamePath + 'sprites/preloader/preloader.background.jpg');\n\n    core.load.atlas('clouds',\n        config.gamePath + 'sprites/preloader/atlas.clouds.v2.png',\n        config.gamePath + 'sprites/preloader/atlas.clouds.v2.json',\n        Phaser.Loader.TEXTURE_ATLAS_JSON_HASH\n    );\n});\n\nexport default class StaticBacground extends ComponentSingleton {\n    constructor(game, parent, name, addToStage, enableBody, physicsBodyType) {\n        super(game, parent, 'StaticBacground', addToStage, enableBody, physicsBodyType);\n    }\n\n    make() {\n        // так как класс компонента наследуется от Phaser.Group то\n        // использовать create для инициализации мы не можем, так\n        // как у Phaser.Group уже есть метод create\n        // Для компонентов унаследованных от ComponentSingleton\n        // метод make вызывается ОДИН раз при первом создании компонента        \n        console.log('Component.make', 'StaticBacground');\n\n        this.backSprite = this.create(0, 0, 'loading_back');\n        this.backSprite.width = config.width;\n        this.backSprite.height = config.height;\n\n        this.cloudsGroup = new Phaser.Group(this.game, this);\n        this.cloudsGroup.position.set(config.center.x, config.center.y);\n        // this.cloudsGroup.scale.set(0.9)\n        this.cloudsGroup.alpha = 0;\n        this.clouds = [];\n\n        this.logoSprite = this.create(config.center.x, config.center.y, 'loading_logo', 0);\n        this.logoSprite.anchor.set(0.5, 0.5);\n        this.logoSprite.scale.set(0.20);\n        this.logoSprite.alpha = 0.8;\n\n        // создаем облака\n        this.ratio = 1.3;\n        const maxDist = Math.max(config.center.x, config.center.y) * 1.2;\n        let q = 50;\n        for (let dist = 50; dist <= maxDist; dist += q) {\n            q *= 1.5;\n            const deltaAngle = Math.random() * Math.PI * 2;\n            for (let count = 0; count <= Math.PI * 2; count += Math.PI / 7) {\n                const angle = deltaAngle + count;\n                const rotation = angle - Math.PI / 2;\n                const scale = (0.4 + (Math.pow(dist, 2) / Math.pow(maxDist, 2)) * 4.0) * 1.8;\n                const brightness = 0.15 + (1 - (dist / maxDist)) * 0.9;\n                const speed = (1.0 + dist / maxDist) * Math.PI / 1800;\n\n                const dr = dist + dist * (Math.random() - 0.5) * 0.2;\n                const sx = dr * Math.cos(angle) * this.ratio;\n                const sy = dr * Math.sin(angle) * 1 / this.ratio;\n                const frame = ('000' + Math.floor(Math.random() * 25)).substr(-3);\n                const sprite = this.cloudsGroup.create(sx, sy, 'clouds', frame);\n                sprite.anchor.setTo(0.5, 0.5);\n                // sprite.scale.set(scale, scale*1.5);\n                sprite.scale.set(scale);\n                sprite.rotation = rotation;\n                sprite.alpha = this.cloudsGroup.alpha;\n\n                const dbr = brightness * 0.8 * Math.random();\n                const br = Math.min(1, brightness + (dbr - dbr / 2));\n                sprite.tint =\n                    ((0xff * br) << 16) +\n                    ((0xf4 * br) << 8) +\n                    ((0xe0 * br) << 0);\n\n                this.clouds.push({\n                    angle,\n                    rotation,\n                    scale,\n                    frame,\n                    speed,\n                    dist: dr,\n                    brightness: br,\n                    sprite\n                });\n            }\n        }\n\n    }\n\n    update(game) {\n        const elapsed = game.time.elapsedMS;\n        const timer = game.time.timeExpected;\n\n        // вращение и масштабирование логотипа построенное на математике\n        this.yoyo = ((this?.yoyo ?? 0) + elapsed / 40000) % 2;\n\n        let yoyo = Math.abs(this.yoyo-1);\n        yoyo = yoyo * 1.2 - 0.1;\n        yoyo = Math.min(1, Math.max(0, yoyo));\n        yoyo = 1-Math.pow(yoyo, 2);\n\n        this.logoSprite.scale.set(yoyo * 0.9);\n        this.logoSprite.alpha = 0.50 + yoyo * 0.5;\n        \n        this._rotation = this._rotation??0;\n        const rotation = (1-yoyo) * 8 * Math.PI;\n        this.logoSprite.rotation += Math.abs(this._rotation - rotation);\n        this._rotation = rotation;\n\n        // движение облаков\n        this.cloudsGroup.alpha = Math.min(0.8, this.cloudsGroup.alpha + 0.0025);\n        this.clouds.forEach(item => {\n            item.angle += item.speed;\n            item.rotation = item.angle - Math.PI / 2;\n\n            const sx = item.dist * Math.cos(item.angle) * this.ratio;\n            const sy = item.dist * Math.sin(item.angle) * 1 / this.ratio;\n\n\n            item.sprite.rotation = item.rotation;\n            item.sprite.position.set(sx, sy);\n            item.sprite.alpha = this.cloudsGroup.alpha;\n        });\n    }\n\n}","import config from '../config.js';\nimport bus from '../tools/tool.events.bus.js'\nimport Component from \"../phaser.extends/extend.component.class.js\";\nimport ComponentSingleton from \"../phaser.extends/extend.component.singleton.class.js\";\n\n\nbus.once('core.boot.preload', core => {\n    // предзагрузка используемых для компонента ресурсов\n    console.log('core.boot.preload', 'SystemButtons');\n\n    core.load.spritesheet('top_buttons', config.gamePath + 'sprites/buttons/system_buttons.png', 54, 44, 10);\n});\n\n\nexport default class SystemButtons extends ComponentSingleton {\n    constructor(game, parent, name, addToStage, enableBody, physicsBodyType) {\n        super(game, parent, 'SystemButtons', addToStage, enableBody, physicsBodyType);\n    }\n\n    make() {\n        // так как класс компонента наследуется от Phaser.Group то\n        // использовать create для инициализации мы не можем, так\n        // как у Phaser.Group уже есть метод create\n        // Для компонентов унаследованных от ComponentSingleton\n        // метод make вызывается ОДИН раз при первом создании компонента        \n        console.log('Component.make', 'SystemButtons');\n        this.alpha = 0.7;\n        this.x = config.width;\n\n        this.btnSound = new Phaser.Button(this.game, -108, 0, 'top_buttons', () => { this.onMutePress(false); }, this, 0, 0, 1);\n        // this.btnSound.scale.set(scale.x, scale.y);\n        this.addChild(this.btnSound);\n\n\n        this.btnNoSound = new Phaser.Button(this.game, -108, 0, 'top_buttons', () => { this.onMutePress(true); }, this, 2, 2, 3);\n        // this.btnNoSound.scale.set(scale.x, scale.y);\n        this.addChild(this.btnNoSound);\n\n        this.btnNoSound.visible = this.game.sound.mute;\n        this.btnSound.visible = !this.game.sound.mute;\n\n        this.btnFSOpen = new Phaser.Button(this.game, -54, 0, 'top_buttons', this.onFullscreenPress, this, 6, 6, 7);\n        // this.btnFSOpen.scale.set(scale.x, scale.y);\n        this.addChild(this.btnFSOpen);\n\n        this.btnFSClose = new Phaser.Button(this.game, -54, 0, 'top_buttons', this.onFullscreenPress, this, 8, 8, 9);\n        // this.btnFSClose.scale.set(scale.x, scale.y);\n        this.btnFSClose.visible = false;\n        this.addChild(this.btnFSClose);\n\n\n        this.game.scale.onSizeChange.add(this.onGameSizeChange, this);\n    }\n\n    onGameSizeChange() {\n        var screenWidth = this.game.scale.width;\n        var screenHeight = this.game.scale.height;\n\n        var sx = this.game.scale.scaleFactor.x;\n        var sy = this.game.scale.scaleFactor.y;\n\n        var btnHeight = 44 * config.scale.y;\n\n        var s = this.game.device.desktop ? 0.06 : 0.09;\n        var h = screenHeight < screenWidth ? screenHeight : screenWidth;\n        var sprS = (s * h) / btnHeight;\n\n        this.scale.x = sx * sprS;\n        this.scale.y = sy * sprS;\n    }\n\n\n\n\n    onFullscreenPress() {\n        console.log('SystemButtons.onFullscreenPress');\n        if (!this.game.scale.compatibility.supportsFullScreen) return;\n\n        const setButtonsVisible = enabled => {\n            this.btnFSOpen.visible = enabled;\n            this.btnFSClose.visible = !enabled;\n        }\n\n        if (this.game.scale.isFullScreen) {\n            this.game.scale.stopFullScreen();\n            setButtonsVisible(true);\n        }\n        else {\n            this.game.scale.startFullScreen(false);\n            setButtonsVisible(false);\n        }\n    }\n\n    onMutePress(enabled) {\n        console.log('SystemButtons.onMutePress');\n        this.btnSound.visible = enabled;\n        this.btnNoSound.visible = !enabled;\n\n        this.game.sound.mute = !enabled;\n    }\n\n}","import EntityWheat from '../components/class.entity.wheat.component.js';\nimport EntityCow from '../components/class.entity.cow.component.js';\nimport EntityChicken from '../components/class.entity.chicken.component.js';\n\n\nconst entities = {\n    chicken: EntityChicken,\n    cow: EntityCow,\n    wheat: EntityWheat    \n}\n\nexport default entities; ","const config = {\n    // фактический размер. влияет на качество графики и fps\n    screenWidth: 1920,\n    screenHeight: 1080,\n\n    // внутреннее разрешение игры. \n    // не влияет на качество графики\n    // (математика, позиционирование и прочее)\n    width: 1280,\n    height: 720,\n\n    sharedPath: 'shared/',\n    gamePath: '/',\n}\n\n// некоторые вычисляемые параметры\n\nconfig.scale = {\n    x: config.screenWidth/config.width,\n    y: config.screenHeight/config.height,\n}\n\nconfig.center = {\n    x: config.width/2,\n    y: config.height/2,\n}\n\n\n\nexport default config;\n\n","// import bus from '../tools/tool.events.bus.js'\n\nexport default class Component extends Phaser.Group {\n    constructor(game, parent, name, addToStage, enableBody, physicsBodyType) {\n        super(game, parent, name, addToStage, enableBody, physicsBodyType);\n\n        // console.log('!!!!!!! Component.constructor', game, parent, name, addToStage, enableBody, physicsBodyType);\n        this.game = game;\n        // this.state = this.game.state.getCurrentState();\n\n        // запоминаем оригинальный this.update объектов этого класса\n        this.updateOrig = this.update;\n        // подменяем оригинальный this.update объектов этого класса\n        this.update = this.updateHandler;\n\n\n        // запоминаем оригинальный this.destroy объектов этого класса\n        this.destroyOrig = this.destroy;\n        // подменяем оригинальный this.destroy объектов этого класса\n        this.destroy = this.destroyHandler;\n\n\n        // запоминаем оригинальный this.stop объектов этого класса\n        this.stopOrig = this.stop;\n        // подменяем оригинальный this.stop объектов этого класса\n        this.stop = this.stopHandler;        \n\n\n        // запоминаем оригинальный this.start объектов этого класса\n        this.startOrig = this.start;\n        // подменяем оригинальный this.start объектов этого класса\n        this.start = this.startHandler;        \n\n\n        this?.make?.();\n        this?.init?.();\n        this.isMake = true;\n        this.isActive = true;\n    }\n\n    updateHandler(...args) {\n        // вызываем оригинальный update для объекта этого класса\n        if (this.isMake && this.exists && this.game && this.isActive) this?.updateOrig?.(this.game);\n        this.forEach(item => {\n            item?.update?.(...args);\n        });\n        // const elapsed = game.time.elapsedMS;\n        // const timer = game.time.timeExpected;\n\n        // console.log(1);\n    }\n\n    destroyHandler(...args) {\n        this.forEach(item => {\n            item?.shutdown?.();\n        });          \n        this?.shutdown?.();\n\n        this.destroyOrig(...args);\n    }\n\n    stopHandler(...args) {\n        if (!this.isActive) return;\n        this.isActive = false;\n        this.forEach(item => {\n            item?.paused?.();\n        });        \n        this?.paused?.();\n        this?.stopOrig(...args)\n    }\n\n    startHandler(...args) {\n        if (this.isActive) return;\n        this.isActive = true;\n        this?.resumed?.();\n        this.forEach(item => {\n            item?.resumed?.();\n        });          \n        this?.startOrig(...args)\n    }\n}\nPhaser.Element = Component;\n\n\n\n// Phaser.GameObjectFactory.prototype.element = function (parent, name, addToStage, enableBody, physicsBodyType) {\n//     return new Phaser.Element(this.game, parent, name, addToStage, enableBody, physicsBodyType);\n// }\n\n\n// console.log(222, Phaser)","import Component from \"./extend.component.class.js\";\n\nconst singletons = {};\n\nexport default class ComponentSingleton extends Component {\n    constructor(game, parent, name='default', addToStage, enableBody, physicsBodyType) {\n        // делаем компонент singlton-м (один экзепляр на всех)\n        const singleton = singletons[name];\n        if (singleton) {\n            // добавляем группу нашего компонента в parent\n            if (parent) parent.addChild(singleton);\n            \n            // вызываем метод init() при создании каждого нового объекта от SystemButtons\n            singleton.init();\n            // вызываем оригинальный resumed для объекта этого класса\n            singleton?.resumed?.();            \n            singleton.forEach(item => {\n                item?.init?.();\n                item?.resumed?.();            \n            });\n            \n\n            // возвращаем ранее созданный объект класса SystemButtons\n            return singleton;\n        }     \n\n        super(game, parent, name, addToStage, enableBody, physicsBodyType);\n        \n        // this.ignoreDestroy = true;\n\n        // запоминаем оригинальный this.init объектов этого класса\n        this.initOrig = this.init;\n        // подменяем оригинальный this.init объектов этого класса\n        this.init = this.initHandler;    \n        \n        // запоминаем первый созданный экземпляр\n        singletons[name] = this;        \n    }\n\n    initHandler(...args) {\n        // восстанавливаем возможность ввода\n        this.setIgnoreChildInput(false);\n\n        // вызываем оригинальный init для объекта этого класса\n        this?.initOrig?.(...args);\n    }\n\n    destroy() {\n        // console.log('ComponentSingleton.destroy', 'MainMenuGui');\n        // так как этот компонент у нас singlon, \n        // и существует все время, пока игра запущена\n        // то ставим заглушку на его уничтожение\n        // так как будет автоматически уничтожатся при смене state\n        this.setIgnoreChildInput(true);\n        this.forEach(item => {\n            item?.paused?.();\n        });       \n        this?.paused?.();\n    }\n    \n  \n\n    setIgnoreChildInput(value) {\n        this.isActive = !value;\n        this.ignoreChildInput = value;\n        this.enabled = value;\n        this.forEach(item => {\n            item?.setIgnoreChildInput?.(value);\n            item.enabled = value;\n        });\n    }    \n\n    \n  \n}\nPhaser.Element = Component;\n\n\n\n// Phaser.GameObjectFactory.prototype.element = function (parent, name, addToStage, enableBody, physicsBodyType) {\n//     return new Phaser.Element(this.game, parent, name, addToStage, enableBody, physicsBodyType);\n// }\n\n\n// console.log(222, Phaser)","import config from '../config.js';\n\n// описание класса Phaser.State https://photonstorm.github.io/phaser-ce/Phaser.State.html\nexport default class State extends Phaser.State {\n    constructor(...args) {\n        super(...args);\n        // console.log('State.constructor');\n\n        // запоминаем оригинальный this.init объектов этого класса\n        this.initOrig = this.init;\n        // подменяем оригинальный this.init объектов этого класса\n        this.init = this.initHandler;\n\n        // запоминаем оригинальный this.update объектов этого класса\n        // this.updateOrig = this.update;\n        // подменяем оригинальный this.update объектов этого класса\n        // this.update = this.updateHandler;\n\n    }\n\n    // updateHandler(...args) {\n    //     // вызываем оригинальный init для объекта этого класса\n    //     this?.updateOrig?.(...args);\n    //     // console.log(1);\n    // }\n\n    // описание метода init https://photonstorm.github.io/phaser-ce/Phaser.State.html#init\n    initHandler(...args) {\n        // console.log('State.init');\n        // хитрые манипуляции со scale. суть в следующем:\n        // хочу задавать фиксированный размер канваса,\n        // но при этом иметь другой фиксированный размер сцен\n\n        // создаем группу, которую будем дополнительно масштабировать\n        this.group = this.add.group();\n\n        // подменяем группу мира в this.add на созданную группу\n        // при этом this.world остается прежним\n        this.add.world = this.group;\n\n        // вызываем оригинальный init для объекта этого класса\n        this.initOrig(...args);\n\n        // устанавливаем для сцены режим scale по умолчанию.\n        // по факту будет менятся scale группы this.world\n        this.game.scale.scaleMode = Phaser.ScaleManager.EXACT_FIT;\n        this.game.scale.fullScreenScaleMode = Phaser.ScaleManager.EXACT_FIT;\n        this.game.scale.refresh();\n\n        // устанавливаем для группы this.group такой scale, чтобы она\n        // четко вписалась в текущий размер канваса имея размер, \n        // заданный в конфиге\n        this.group.scale.set(\n            config.scale.x,\n            config.scale.y\n        );\n    }\n}\n","import config from '../config.js';\nimport bus from '../tools/tool.events.bus.js'\nimport StaticBacground from '../components/class.staticbackground.component.js'\nimport SystemButtons from '../components/class.systembuttons.component.js';\nimport IncorrectOrientation from '../components/class.incorrectorientation.component.js';\n\nimport State from '../phaser.extends/extend.state.class.js';\n\n// ловим событие 'core.boot.preload' и производим\n// предзагрузку необходимых на данной стадии ресурсов\nbus.once('core.boot.preload', core => {\n    console.log('core.boot.preload', 'BootState');\n\n    core.load.image('loading_logo', config.gamePath + 'sprites/preloader/preloader.logo.png');\n    core.load.image('loading_back', config.gamePath + 'sprites/preloader/preloader.background.jpg');\n    core.load.spritesheet('loading_bar', config.gamePath + 'sprites/preloader/bar.png', 18, 10, 3);\n    core.load.bitmapFont('gl_fnt_lucida_10_rgba_ye', config.gamePath + 'fonts/gl_fnt_arial_14_bold_ye_bl_rgba.png', config.gamePath + 'fonts/gl_fnt_arial_14_bold_ye_bl_rgba.xml', null, -3, 0);\n});\n\n\n\nexport default class BootState extends State {\n    constructor(...args) {\n        super(...args);\n    }\n\n    /**\n     * стандартный метод класса Phaser.State\n     * https://photonstorm.github.io/phaser-ce/Phaser.State.html#init\n     */\n    init() {\n        console.log('State.init', 'BootState');\n\n        // некоторые параметры)))\n        this.BAR_WIDTH = 0.25 * config.width;\n        this.BAR_HEIGHT = 10;\n        this.position = {\n            x: config.center.x,\n            y: config.center.y * 1.75\n        };\n\n        // устанавливаем обработчики предварительной загрузки ресурсоов загрузочного экрана\n        this.load.onFileComplete.add(this.bootFileComplete, this);\n        this.load.onLoadComplete.add(this.bootLoadComplete, this);\n\n        // отключаем контекствоное меню по ПКМ\n        this.game.canvas.oncontextmenu = function (e) { e.preventDefault(); }\n\n    }\n\n    // стандартный обработчик паузы компонента Phaser.State\n    paused() {\n        // не даем загрузчику становиться на паузу\n        this.state.resume();\n        this.game.paused = false;\n    }\n\n    // обработчики предварительной загрузки ресурсоов загрузочного экрана\n    bootFileComplete(progress, cacheKey, success, totalLoaded, totalFiles) {\n        // console.log('bootFileComplete', totalLoaded, '/', totalFiles);\n    }\n    bootLoadComplete() {\n        // console.log('State.bootpreoad.complete', 'BootState');\n        this.load.onFileComplete.remove(this.bootFileComplete, this);\n        this.load.onLoadComplete.remove(this.bootLoadComplete, this);\n    }\n\n    // обработчики предварительной загрузки ресурсоов всей игры\n    gameFileComplete(progress, cacheKey, success, totalLoaded, totalFiles) {\n        // console.log('gameFileComplete', totalLoaded, '/', totalFiles);\n        this.barSprite.width = Math.floor(this.BAR_WIDTH * progress / 100);\n        this.statusText.text = 'loading ' + totalLoaded + ' of ' + totalFiles;\n        // this.logoSprite.alpha = 1-(progress / 100)\n    }\n    gameLoadComplete() {\n        // console.log('State.preload.complate', 'BootState');\n        this.load.onFileComplete.remove(this.gameFileComplete, this);\n        this.load.onLoadComplete.remove(this.gameLoadComplete, this);\n        this.isLoaded = true;\n\n        this.statusText.text = this.connectionStatusText || 'load complete';\n        this.next();\n    }\n\n    /**\n     * стандартный метод класса Phaser.State\n     * https://photonstorm.github.io/phaser-ce/Phaser.State.html#preload\n     */\n     preload(...args) {\n        // оповещаем все заинтересованные компоненты о возможости загрузить свои ресурсы\n        // до запуска сцены прелоадера. Имеет смысл для компонентов, которые используются \n        // в прелоадере\n        bus.emit('core.boot.preload', this);\n    }\n\n    /**\n     * стандартный метод класса Phaser.State\n     * https://photonstorm.github.io/phaser-ce/Phaser.State.html#create\n     */\n     create() {\n        console.log('State.create', 'BootState');\n\n        // подключаем заставку с облаками в качестве фона\n        this.back = new StaticBacground(this.game, this.group);\n       \n        // отрисовываем статусбар загрузки\n        this.barBackSprite = this.add.tileSprite(this.position.x - this.BAR_WIDTH * 0.5, this.position.y - this.BAR_HEIGHT, this.BAR_WIDTH, this.BAR_HEIGHT, 'loading_bar', 1, this.group);\n        this.barBackSprite.tint = 0xcaba00;\n        this.barBackSprite.scale.set(1);\n\n        this.barSprite = this.add.tileSprite(this.position.x - this.BAR_WIDTH * 0.5, this.position.y - this.BAR_HEIGHT, this.BAR_WIDTH, this.BAR_HEIGHT, 'loading_bar', 2, this.group);\n        this.barSprite.width = 0;\n        this.barSprite.scale.set(1);\n\n        this.statusText = this.add.bitmapText(this.position.x, this.position.y, 'gl_fnt_lucida_10_rgba_ye', 'loading', 100, this.group);\n        this.statusText.anchor.x = 0.5;\n\n        // поверх подключаем синглтон компоненты: системные кнопки и неправильная ориентация экрана        \n        new IncorrectOrientation(this.game, this.group);\n        new SystemButtons(this.game, this.group);\n\n        // отвязываемся от синхронности\n        setTimeout(() => {\n            // устанавливаем обработчики процесса загрузки ресурсов\n            this.load.onFileComplete.add(this.gameFileComplete, this);\n            this.load.onLoadComplete.add(this.gameLoadComplete, this);\n\n            // сообщаем всем заинтересованным о том что пора дать ссылки на загружаенмые ресурсы\n            bus.emit('core.preload', this);\n\n            // запускаем загрузку всех ресурсов\n            this.load.start();\n\n        }, 0);\n    }\n\n    /**\n     * вызов метода передает управление следующей сцене 'MainMenuState'\n     */\n    next() {\n        console.log('BootState.next');\n        // сообщаем всем заинтересованным о том что загрузка ресурсов завершена \n        // и можно приступить к созданию объектов, использующих загруженные ресурсы\n        bus.emit('core.create', this);\n\n        // задержка не несет никакого функционала\n        // и сделана только для того, чтобы увидеть\n        // последние сообщения от клиента\n        setTimeout(() => {\n            // передаем управление в сцену главного меню\n            this.state.start('MainMenuState');\n        }, 300);\n    }\n\n} \n","import config from '../config.js';\n\nimport bus from '../tools/tool.events.bus.js'\nimport State from '../phaser.extends/extend.state.class.js';\n\n\nimport SystemButtons from '../components/class.systembuttons.component.js';\nimport IncorrectOrientation from '../components/class.incorrectorientation.component.js';\nimport GameEnviromentGui from '../components/class.game.enviroment.gui.component.js'\nimport GameFieldsGui from '../components/class.game.fields.gui.component.js'\nimport GameEntityGui from '../components/class.game.entity.gui.component.js'\nimport GameStateGui from '../components/class.game.state.gui.component.js'\nimport Crosshair from '../components/class.crosshair.component.js'\n\n// ловим событие 'core.preload' и производим\n// предзагрузку необходимых на данной стадии ресурсов\nbus.once('core.preload', core => {\n    console.log('core.preload', 'GameState');\n});\n\n\nexport default class GameState extends State {\n    constructor(...args) {\n        super(...args);\n        this.name = 'game';\n        // setTimeout(() => {\n        //     this.state.start('MainMenuState');\n        // }, 5000);        \n    }\n\n    /**\n     * стандартный метод класса Phaser.State\n     * https://photonstorm.github.io/phaser-ce/Phaser.State.html#init\n     */\n     init() {\n        console.log('State.init', 'GameState');\n\n        this.layers = {\n            game: new Phaser.Group(this.game, this.group),\n            system: new Phaser.Group(this.game, this.group),\n        };\n\n        // const seed = Math.trunc(Math.random() * 99999);\n        // const seed = 4851;\n        const seed = 47323;\n\n        console.log('seed', seed);\n\n    }\n\n    /**\n     * стандартный метод класса Phaser.State\n     * https://photonstorm.github.io/phaser-ce/Phaser.State.html#create\n     */\n    create() {\n        console.log('State.create', 'GameState');\n\n\n        // this.back = new StaticBacground(this.game, this.layers.baskground);\n\n        // this.logo = this.layers.foregraund.create(config.center.x, config.center.y, 'logo');\n        // this.logo.anchor.set(0.5);\n\n\n\n        // this.layers.road.alpha = 0.3;\n        // this.gameWorld.road.points.forEach(point => {\n        //     point.sprite = new Phaser.Sprite(this.game, point.x, point.y, 'point', 0);\n        //     point.sprite.anchor.set(0.5);\n        //     point.sprite.scale.set(0.015);\n        //     this.layers.road.addChild(point.sprite);\n\n        // });\n        new IncorrectOrientation(this.game, this.layers.system);\n        new SystemButtons(this.game, this.layers.system);\n        this.crosshair = new Crosshair(this.game, this.layers.system);\n\n        new GameEnviromentGui(this.game, this.layers.game)\n        new GameFieldsGui(this.game, this.layers.game)\n        this.entityPanel = new GameEntityGui(this.game, this.layers.game)\n        this.entityPanel.position.set(0, 80)\n\n        this.statePanel = new GameStateGui(this.game, this.layers.game)\n        this.statePanel.position.set(config.center.x, 0)\n\n    }\n\n    /**\n     * стандартный метод класса Phaser.State\n     * https://photonstorm.github.io/phaser-ce/Phaser.State.html#update\n     */\n    update(game) {\n        // const elapsed = game.time.elapsedMS;\n        // const timer = game.time.time;\n        // console.log(game.time, timer - (this?.latsUnitstimer??0));\n        // this.layers.entity.sort('y', Phaser.Group.SORT_ASCENDING);\n    }\n\n    start() {\n        console.log('State.start', 'GameState');\n    }\n\n    /**\n     * стандартный метод класса Phaser.State\n     * https://photonstorm.github.io/phaser-ce/Phaser.State.html#render\n     */\n    render() {\n        this.game.debug.inputInfo(32, 32);\n    }\n}\n\n\n\n\n\n\n\n","import config from '../config.js';\nimport bus from '../tools/tool.events.bus.js'\nimport State from '../phaser.extends/extend.state.class.js';\n\nimport StaticBacground from '../components/class.staticbackground.component.js'\nimport SystemButtons from '../components/class.systembuttons.component.js';\nimport MainMenuGui from '../components/class.mainmenu.gui.component.js';\nimport IncorrectOrientation from '../components/class.incorrectorientation.component.js';\n\n// ловим событие 'core.preload' и производим предзагрузку необходимых на данной стадии ресурсов\nbus.once('core.preload', core => {\n    console.log('core.preload', 'Menu');\n\n    core.load.audio('snd_menu_bgm', config.gamePath + 'sounds/snd_main_bgm_v1.mp3');\n});\n\nexport default class MainMenuState extends State {\n    constructor(...args) {\n        super(...args);\n    }\n\n    /**\n     * стандартный метод класса Phaser.State\n     * https://photonstorm.github.io/phaser-ce/Phaser.State.html#init\n     */\n    init() {\n        console.log('State.menu.init');\n    }\n\n    // стандартный обработчик паузы компонента Phaser.State\n    paused() {\n        // this.state.resume();\n        // this.game.stage.paused = false;\n        this.snd_background.pause();\n        console.log('paused')\n    }\n\n    // стандартный обработчик снятия паузы компонента Phaser.State\n    resumed() {\n        this.snd_background.resume();\n        console.log('resumed')\n    }\n\n    // стандартный обработчик остановки компонента Phaser.State\n    shutdown() {\n        this.snd_background.stop();\n        console.log('shutdown')\n    }\n\n    /**\n     * стандартный метод класса Phaser.State\n     * https://photonstorm.github.io/phaser-ce/Phaser.State.html#create\n     */\n     create() {\n        console.log('State.menu.create');\n        this.snd_background = this.game.add.audio('snd_menu_bgm');\n        this.snd_background.play('', 0, 1, true);\n\n\n        this.back = new StaticBacground(this.game, this.group);\n        \n        this.gui = new MainMenuGui(this.game, this.group);\n\n        new IncorrectOrientation(this.game, this.group);\n        new SystemButtons(this.game, this.group);\n\n\n        // console.log(this.state);\n        // setInterval(() => {\n        //     this.state.start('Menu');\n        // setTimeout(() => {\n        //     this.state.start('Disconnect', false);\n\n        // }, 1000);\n        // }, 2000);\n\n    }\n\n    /**\n     * стандартный метод класса Phaser.State\n     * https://photonstorm.github.io/phaser-ce/Phaser.State.html#update\n     */\n     update(game) {\n        // const elapsed = game.time.elapsedMS;\n        // const timer = game.time.timeExpected;\n        // this.yoyo = ((this?.yoyo ?? 1) + elapsed / 5000) % 2;\n        // const scale = Math.abs(this.yoyo - 1)/10;\n\n        // this.foreSprite.scale.set(0.73 + scale);\n\n    }\n\n} \n","import comparePaths from './tool.compare.path.js'\n\n\n/**\n * класс ExtendEventEmitter - упрощенный вариант EventEmitter-а из NodeJs но имеющий \n * при этом существенное дополнение - в именах событий поддерживаются простые шаблоны,\n * что позволяет более гибко устанавливать обработчики событий, и вызывать их.\n * Пример ниже дает представление о возможностях использования данных шаблонов:\n * ```\n *  'aaa'       === 'aaa'\n *  'aaa'       !== 'bbb'\n *  'aaa.bbb'   === 'aaa.bbb'\n *  'aaa.bbb'   !== 'aaa.ccc'\n *  'aaa.*'     === 'aaa'\n *  'aaa.*'     === 'aaa.*'\n *  'aaa.*'     === 'aaa.bbb'\n *  'aaa.*.ccc' !== 'aaa'\n *  'aaa.*.ccc' === 'aaa.*'\n *  'aaa.*.ccc' !== 'aaa.bbb'\n *  'aaa.*.*'   === 'aaa.bbb'\n *  'aaa.*.ccc' === 'aaa.bbb.*'\n *  'aaa.*.ccc' === 'aaa.bbb.ccc'\n *  '*'         === 'aaa'\n *  '*'         === 'aaa.bbb'\n *  '*'         === 'aaa.bbb.ccc'\n * ```\n */\nexport default class ExtendEventEmitter {\n    /**\n     * This callback is displayed as part of the MyClass class.\n     * @callback ExtendEventEmitter~FuncCallback\n     * @param {any} arguments - любые аргументы (функция примет те аргументы, которые были переданы методу {@link ExtendEventEmitter#emit ExtendEventEmitter.emit()} начиная со второго параметра)\n     */\n\n    /**\n     * @constructor\n     * @param {boolean} isAsync - принимет значения true и false. По умолчанию false\n     */\n    constructor(isAsync) {\n        // // Классический метод защиты от конструкторов, не вызываемых с помощью new\n        // if (!(this instanceof ExtendEventEmitter)) {\n        //     return new ExtendEventEmitter(isAsync);\n        // }\n        this.__isAsync = isAsync;\n        this.__e = {};\n        this.splitter = '.'\n    }\n\n    /**\n     * Производит поиск обработчиков с соответсвующим шаблоном пути.\n     * Принцип сравнения шаблонов раскрывает следующий пример\n     * ```\n     *  'aaa'       === 'aaa'\n     *  'aaa'       !== 'bbb'\n     *  'aaa.bbb'   === 'aaa.bbb'\n     *  'aaa.bbb'   !== 'aaa.ccc'\n     *  'aaa.*'     === 'aaa'\n     *  'aaa.*'     === 'aaa.*'\n     *  'aaa.*'     === 'aaa.bbb'\n     *  'aaa.*.ccc' !== 'aaa'\n     *  'aaa.*.ccc' === 'aaa.*'\n     *  'aaa.*.ccc' !== 'aaa.bbb'\n     *  'aaa.*.*'   === 'aaa.bbb'\n     *  'aaa.*.ccc' === 'aaa.bbb.*'\n     *  'aaa.*.ccc' === 'aaa.bbb.ccc'\n     *  '*'         === 'aaa'\n     *  '*'         === 'aaa.bbb'\n     *  '*'         === 'aaa.bbb.ccc'\n     * ```\n     * @param {string} eventName \n     * @returns {array} список обработчиков событий, положительно прошедших проверку\n     */\n    getListeners(eventName){\n        const path1 = eventName.split('.');\n\n        const list = Object.values(this.__e).reduce((acc,item)=>{\n            if( comparePaths(path1, item.path) ) acc.push(...item.listeners);\n            \n            return acc;\n        },[]);\n        return list;\n    }\n    /** @lends ExtendEventEmitter.prototype */\n    /**\n     * Устанавливает постоянный обработчик `listener` события `eventName`\n     * @param  {String}   eventName    название события\n     * @param  {ExtendEventEmitter~FuncCallback} listener обработчик события\n     * @param  {object} context контекст, в котором будет вызван обработчик события\n     * \n     * @returns {Function} установленный обработчик события\n     */\n    on(eventName, listener, context) {\n        if (typeof listener !== 'function') return;\n        if (!context) context = null;\n\n        if (typeof this.__e[eventName] !== 'object') {\n            this.__e[eventName] = {\n                path: eventName.split(this.splitter),\n                listeners: [],\n            };\n        }\n        this.__e[eventName].listeners.push({ listener: listener, context: context });\n        return listener;\n    }\n    /**\n     * Удаляет обработчик listener события eventName\n     *\n     * @param  {String}   eventName    название события\n     * @param  {Function} listener обработчик события\n     */\n    removeListener(eventName, listener) {\n        // const list = this.__e[eventName]?.listeners;\n        const list = this.getListeners(eventName);\n\n        if (!Array.isArray(list))\n            return;\n\n        const idx = list.findIndex(function (item) {\n            return listener === item.listener;\n        }, this);\n\n        if (idx < 0)\n            return;\n\n        list.splice(idx, 1);\n\n        if (!list.length)\n            delete this.__e[eventName];\n    }\n    /**\n     * Создает событие event вызывая все зарегестрированные для него обработчики\n     *\n     * @param  {String}   eventName    название события\n     * @param  {any} arguments  аргументы для обработчиков событий\n     */\n    emit(eventName, ...args) {\n        // console.log('EVENT',eventName,args)\n        // const list = this.__e[eventName]?.listeners;\n        const list = this.getListeners(eventName);\n\n\n        if (!Array.isArray(list))\n            return;\n        if (this.__isAsync) {\n            list.slice(0).forEach(function (item) {\n                setImmediate(function () {\n                    item.listener.apply(item.context, args);\n                });\n            });\n        } else {\n            list.slice(0).forEach(function (item) {\n                // if(eventName!=='game.update') console.log(eventName, \"args\",...args);\n                item.listener.apply(item.context, args);\n            });\n        }\n    }\n    /**\n     * Устанавливает одноразовый обработчик listener события eventName\n     *\n     * @param  {String}   eventName    название события\n     * @param  {ExtendEventEmitter~FuncCallback} listener обработчик события\n     * @param  {object} context контекст, в котором будет вызван обработчик события\n     * \n     * @returns {Function} установленный обработчик события\n     */\n    once(eventName, listener, context) {\n\n        if (!context) context = null;\n        const _self = this;\n        const g = (...args) => {\n            // console.log('removeListener', 1, eventName, (Array.isArray(_self.__e[eventName])?_self.__e[eventName].length:0))\n            this.removeListener(eventName, g);\n            listener.apply(context, args);\n            // console.log('removeListener', 2, eventName, (Array.isArray(_self.__e[eventName])?_self.__e[eventName].length:0))\n        };\n        this.on(eventName, g);\n        return listener;\n    }\n}\n\n\n\n\n\n\n// function getListeners(eventName1, eventName2){\n//     const path1 = eventName1.split('.');\n//     const path2 = eventName2.split('.');\n//     const len1 = path1.length;\n//     const len2 = path2.length;\n//     const len = Math.max(len1, len2);\n//     let isEqual = true;\n\n//     for(let i=0; i<len; i++){\n//         const key1 = path1[i];\n//         const key2 = path2[i];\n//         if(key1==='*' && len1===i+1 ) break;\n//         if(key2==='*' && len2===i+1 ) break;\n//         if(key1==='*' || key2==='*' || key1===key2) continue;\n//         isEqual = false;\n//         break;\n//     }\n    \n//     if( isEqual ){\n//         console.log(eventName1, \"===\", eventName2)\n//     }else{\n//         console.log(eventName1, \"!==\",eventName2)\n//     }\n\n// };\n\n\n// getListeners('aaa', 'aaa');\n// getListeners('aaa', 'bbb');\n// getListeners('aaa.bbb', 'aaa.bbb')\n// getListeners('aaa.bbb', 'aaa.ccc')\n// getListeners('aaa.*', 'aaa')\n// getListeners('aaa.*', 'aaa.*')\n// getListeners('aaa.*', 'aaa.bbb')\n// getListeners('aaa.*.ccc', 'aaa')\n// getListeners('aaa.*.ccc', 'aaa.*')\n// getListeners('aaa.*.ccc', 'aaa.bbb')\n// getListeners('aaa.*.*', 'aaa.bbb')\n// getListeners('aaa.*.ccc', 'aaa.bbb.*')\n// getListeners('aaa.*.ccc', 'aaa.bbb.ccc')\n// getListeners('*', 'aaa')\n// getListeners('*', 'aaa.bbb')\n// getListeners('*', 'aaa.bbb.ccc')\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","export default class Keyboard {\n    constructor(lesteners = {}, context) {\n        // тут будут флаги отслеживания нажатия кнопок\n        this.keys = {};\n\n        // тут запомним текущие обработчики кнопок\n        this.listeners = {};\n\n        this.isActive = false;\n\n        // устанавливаем слушатели на нажатия, удержание и отжатия кнопок\n        window.addEventListener(\"keydown\", this.downListener.bind(this),false);\n        window.addEventListener(\"keyup\", this.upListener.bind(this),false);\n\n        this.setListeners(lesteners, context??this);\n    }\n\n    stop(){\n        this.isActive = false;\n    }\n    start(){\n        this.isActive = true;\n    }\n\n    setListeners(list, context) {\n        if (!list || typeof list !== 'object') return;\n        if (!context) context = null;\n        this.listeners = {};\n        Object.keys(list).forEach(function (key) {\n            if (typeof list[key] !== 'function') return;\n            this.listeners[key] = function (key) {\n                list[key].call(context, key);\n            };\n        }, this)\n    }\n\n    downListener(event) {\n        if(!this.isActive) return;\n        const key = event.code.replace(/^(Key|Digit)/i, '').toUpperCase();\n        console.log('onDown', key, this.keys[key], this.listeners);\n\n        if (this.keys[key]) return;\n        this.keys[key] = true;\n\n        if (this.listeners[key])\n            this.listeners[key](key);\n        // console.log('onDown', key);\n    }\n    upListener(event) {\n        if(!this.isActive) return;\n        const key = event.code.replace(/^(Key|Digit)/i, '').toUpperCase();\n        this.keys[key] = false;\n\n        // console.log('onUp',key);\n        // this.emit(key, 'up');\n    }\n    pressListener(key) {\n        if(!this.isActive) return;\n        // key = key.toUpperCase();\n        // console.log('onPress',key);\n        // this.emit(key, 'press');\n\n    }\n}\n\n","export class Matrix {\n\tstatic multiply(a, b) {\n\t\tconst m = [\n\t\t\t[0, 0, 0, 0],\n\t\t\t[0, 0, 0, 0],\n\t\t\t[0, 0, 0, 0],\n\t\t\t[0, 0, 0, 0],\n\t\t];\n\n\t\tfor (let i = 0; i < 4; i++) {\n\t\t\tfor (let j = 0; j < 4; j++) {\n\t\t\t\tm[i][j] = a[i][0] * b[0][j] +\n\t\t\t\t\ta[i][1] * b[1][j] +\n\t\t\t\t\ta[i][2] * b[2][j] +\n\t\t\t\t\ta[i][3] * b[3][j];\n\t\t\t}\n\t\t}\n\n\t\treturn m;\n\t}\n\tstatic getTranslation(dx, dy, dz) {\n\t\treturn [\n\t\t\t[1, 0, 0, dx],\n\t\t\t[0, 1, 0, dy],\n\t\t\t[0, 0, 1, dz],\n\t\t\t[0, 0, 0, 1],\n\t\t]\n\t}\n\tstatic getScale(sx, sy, sz) {\n\t\treturn [\n\t\t\t[sx, 0, 0, 0],\n\t\t\t[0, sy, 0, 0],\n\t\t\t[0, 0, sz, 0],\n\t\t\t[0, 0, 0, 1],\n\t\t]\n\t}\n\tstatic getRotationX(angle) {\n\t\t// const rad = Math.PI / 180 * angle;\n\n\t\treturn [\n\t\t\t[1, 0, 0, 0],\n\t\t\t[0, Math.cos(angle), -Math.sin(angle), 0],\n\t\t\t[0, Math.sin(angle), Math.cos(angle), 0],\n\t\t\t[0, 0, 0, 1],\n\t\t];\n\t}\n\n\tstatic getRotationY(angle) {\n\t\t// const rad = Math.PI / 180 * angle;\n\n\t\treturn [\n\t\t\t[Math.cos(angle), 0, Math.sin(angle), 0],\n\t\t\t[0, 1, 0, 0],\n\t\t\t[-Math.sin(angle), 0, Math.cos(angle), 0],\n\t\t\t[0, 0, 0, 1],\n\t\t];\n\t}\n\n\tstatic getRotationZ(angle) {\n\t\t// const rad = Math.PI / 180 * angle;\n\n\t\treturn [\n\t\t\t[Math.cos(angle), -Math.sin(angle), 0, 0],\n\t\t\t[Math.sin(angle), Math.cos(angle), 0, 0],\n\t\t\t[0, 0, 1, 0],\n\t\t\t[0, 0, 0, 1],\n\t\t];\n\t}\n\tstatic getLookAt(from, target, up) {\n\t\tconst vz = from.subtract(target).normalize();\n\t\tconst vx = up.normalize().cross(vz);\n\t\tconst vy = vz.normalize().cross(vx);\n\n\t\treturn Matrix.multiply(\n\t\t\tMatrix.getTranslation(-from.x, -from.y, -eye.z),\n\t\t\t[\n\t\t\t\t[vx.x, vx.y, vx.z, 0],\n\t\t\t\t[vy.x, vy.y, vy.z, 0],\n\t\t\t\t[vz.x, vz.y, vz.z, 0],\n\t\t\t\t[0, 0, 0, 1]\n\t\t\t]);\n\t}\n\n\tstatic getPerspectiveProjection(fovy, aspect, n, f) {\n\t\tconst radians = Math.PI / 180 * fovy\n\t\tconst sx = (1 / Math.tan(radians / 2)) / aspect;\n\t\tconst sy = (1 / Math.tan(radians / 2));\n\t\tconst sz = (f + n) / (f - n);\n\t\tconst dz = (-2 * f * n) / (f - n);\n\t\treturn [\n\t\t\t[sx, 0, 0, 0],\n\t\t\t[0, sy, 0, 0],\n\t\t\t[0, 0, sz, dz],\n\t\t\t[0, 0, -1, 0],\n\t\t]\n\t}\n\n\tstatic multiplyVector(m, v) {\n\t\treturn new Vector3(\n\t\t\tm[0][0] * v.x + m[0][1] * v.y + m[0][2] * v.z + m[0][3] * v.w,\n\t\t\tm[1][0] * v.x + m[1][1] * v.y + m[1][2] * v.z + m[1][3] * v.w,\n\t\t\tm[2][0] * v.x + m[2][1] * v.y + m[2][2] * v.z + m[2][3] * v.w,\n\t\t\tm[3][0] * v.x + m[3][1] * v.y + m[3][2] * v.z + m[3][3] * v.w,\n\t\t)\n\t}\n\n\tstatic divideVector(m, v) {\n\t\treturn new Vector3(\n\t\t\tm[0][0] / v.x + m[0][1] / v.y + m[0][2] / v.z + m[0][3] / v.w,\n\t\t\tm[1][0] / v.x + m[1][1] / v.y + m[1][2] / v.z + m[1][3] / v.w,\n\t\t\tm[2][0] / v.x + m[2][1] / v.y + m[2][2] / v.z + m[2][3] / v.w,\n\t\t\tm[3][0] / v.x + m[3][1] / v.y + m[3][2] / v.z + m[3][3] / v.w,\n\t\t)\n\t}\n}\n\nexport class Vector3 {\n\tx = 0;\n\ty = 0;\n\tz = 0;\n\tw = 1;\n\n\tconstructor(x, y, z, w = 1) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\t}\n\n\t// инвертировать вектор\n\tnegative() {\n\t\treturn new Vector3(-this.x, -this.y, -this.z);\n\t};\n\n\t// сложить с вектором или скаляром\n\tadd(v) {\n\t\tif (v instanceof Vector3) return new Vector3(this.x + v.x, this.y + v.y, this.z + v.z);\n\t\telse return new Vector3(this.x + v, this.y + v, this.z + v);\n\t}\n\n\t// вычесть вектор или скаляр\n\tsubtract(v) {\n\t\tif (v instanceof Vector3) return new Vector3(this.x - v.x, this.y - v.y, this.z - v.z);\n\t\telse return new Vector3(this.x - v, this.y - v, this.z - v);\n\t};\n\n\t// умножить на вектор или скаляр\n\tmultiply(v) {\n\t\tif (v instanceof Vector3) return new Vector3(this.x * v.x, this.y * v.y, this.z * v.z);\n\t\telse return new Vector3(this.x * v, this.y * v, this.z * v);\n\t};\n\n\t// разделить на вектор или скаляр\n\tdivide(v) {\n\t\tif (v instanceof Vector3) return new Vector3(this.x / v.x, this.y / v.y, this.z / v.z);\n\t\telse return new Vector3(this.x / v, this.y / v, this.z / v);\n\t};\n\n\t// длинна вектора\n\tlength() {\n\t\treturn Math.hypot(this.x, this.y, this.z);\n\t};\n\t// нормализация вектора (длина вектора становится равна 1)\t\n\tnormalize() {\n\t\treturn this.divide(this.length())\n\t};\n\n\t// скалярное перемножение векторов\t\n\tdot(v) {\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\t};\n\n\tcross(v) {\n\t\treturn new Vector3(\n\t\t\tthis.y * v.z - this.z * v.y,\n\t\t\tthis.z * v.x - this.x * v.z,\n\t\t\tthis.x * v.y - this.y * v.x,\n\t\t)\n\t}\n\n\t// получить нормаль к вектору\n\tnormal() {\n\t\treturn new Vector3(-this.y, this.x, this.z);\n\t};\n}\n\n\nexport class Vector2 {\n\tconstructor(x, y, type) {\n\t\tthis.init(x, y, type);\n\t}\n\n\t// переинициализировать вектор\n\tinit(x, y, type) {\n\t\tif (type === 'rad') {\n\t\t\tthis.angle = x;\n\t\t\tthis.dist = y;\n\t\t\tthis.x = this.dist * Math.cos(this.angle);\n\t\t\tthis.y = this.dist * Math.sin(this.angle);\n\t\t} else if (type === 'grad') {\n\t\t\tthis.angle = x * Math.PI / 180;\n\t\t\tthis.dist = y;\n\t\t\tthis.x = this.dist * Math.cos(this.angle);\n\t\t\tthis.y = this.dist * Math.sin(this.angle);\n\t\t} else {\n\t\t\tthis.x = x ?? 0;\n\t\t\tthis.y = y ?? 0;\n\t\t\tconst angle = this.toAngle();\n\t\t\tthis.angle = isNaN(angle) ? (this.angle || 0) : angle;\n\t\t\tthis.dist = this.length();\n\t\t}\n\t\treturn this;\n\t};\n\n\n\trotate(deltaAngle) {\n\t\tthis.angle += deltaAngle * Math.PI / 180;\n\t\tthis.x = this.dist * Math.cos(this.angle);\n\t\tthis.y = this.dist * Math.sin(this.angle);\n\t}\n\trotateRad(deltaAngle) {\n\t\tthis.angle += deltaAngle;\n\t\tthis.x = this.dist * Math.cos(this.angle);\n\t\tthis.y = this.dist * Math.sin(this.angle);\n\t}\n\n\t// инвертировать вектор\n\tnegative() {\n\t\treturn new Vector2(-this.x, -this.y);\n\t};\n\n\t// сложить с вектором или скаляром\n\tadd(v) {\n\t\tif (v instanceof Vector2) return new Vector2(this.x + v.x, this.y + v.y);\n\t\telse return new Vector2(this.x + v, this.y + v);\n\t};\n\n\t// вычесть вектор или скаляр\n\tsubtract(v) {\n\t\tif (v instanceof Vector2) return new Vector2(this.x - v.x, this.y - v.y);\n\t\telse return new Vector2(this.x - v, this.y - v);\n\t};\n\n\t// умножить на вектор или скаляр\n\tmultiply(v) {\n\t\tif (v instanceof Vector2) return new Vector2(this.x * v.x, this.y * v.y);\n\t\telse return new Vector2(this.x * v, this.y * v);\n\t};\n\n\t// разделить на вектор или скаляр\n\tdivide(v) {\n\t\tif (v instanceof Vector2) return new Vector2(this.x / v.x, this.y / v.y);\n\t\telse return new Vector2(this.x / v, this.y / v);\n\t};\n\n\t// сравнить с вектором\n\tequals(v) {\n\t\treturn this.x == v.x && this.y == v.y;\n\t};\n\n\t// скалярное перемножение векторов\t\n\tdot(v) {\n\t\treturn this.x * v.x + this.y * v.y;\n\t};\n\n\t// ???\n\tcross(v) {\n\t\treturn new Vector2(\n\t\t\tthis.y * v.x - this.x * v.y,\n\t\t\tthis.x * v.y - this.y * v.x\n\t\t);\n\t};\n\n\t// длинна вектора\n\tlength() {\n\t\treturn Math.hypot(this.x, this.y);\n\t};\n\n\t// нормализация вектора\n\tunit() {\n\t\treturn this.divide(this.length());\n\t};\n\tnormalize() {\n\t\treturn this.divide(this.length()||0.00000000001)\n\t};\n\n\tmin() {\n\t\treturn Math.min(this.x, this.y);\n\t};\n\n\tmax() {\n\t\treturn Math.max(this.x, this.y);\n\t};\n\n\t// получение угла между вектором и осью X\n\ttoAngle() {\n\t\t// return Math.asin(this.y / this.length());\n\t\treturn Math.atan2(this.y, this.x);\n\t};\n\n\t// получение угла между двумя вектороми\n\tangleTo(v) {\n\t\treturn Math.acos(this.dot(v) / (this.length() * v.length()));\n\t};\n\n\t// создать массив из вектора\n\ttoArray(n) {\n\t\treturn [this.x, this.y].slice(0, n || 3);\n\t};\n\n\t// слонировать вектор\n\tclone() {\n\t\treturn new Vector2(this.x, this.y);\n\t};\n\n\t// получить нормаль к вектору\n\tnormal() {\n\t\treturn new Vector2(-this.y, this.x);\n\t};\n\n\t// получить объект Point\n\ttoLocate() {\n\t\treturn {\n\t\t\tx: this.x,\n\t\t\ty: this.y\n\t\t}\n\t}\n\t// Vector2.fromAngle = function(angle) {\n\t// \treturn new Vector2(Math.cos(angle), Math.sin(angle));\n\t// };\n\t// Vector2.randomDirection = function() {\n\t// \treturn Vector2.fromAngle(Math.random() * Math.PI * 2);\n\t// };\n\t// Vector2.min = function(a, b) {\n\t// \treturn new Vector2(Math.min(a.x, b.x), Math.min(a.y, b.y));\n\t// };\n\t// Vector2.max = function(a, b) {\n\t// \treturn new Vector2(Math.max(a.x, b.x), Math.max(a.y, b.y));\n\t// };\n\t// Vector2.lerp = function(a, b, fraction) {\n\t// \treturn b.subtract(a).multiply(fraction).add(a);\n\t// };\n\t// Vector2.fromArray = function(a) {\n\t// \treturn new Vector2(a[0], a[1]);\n\t// };\n\t// Vector2.angleBetween = function(a, b) {\n\t// \treturn a.angleTo(b);\n\t// };\t\n\n\n};\n\n\n\n\n","/**\n * Утилита для сопоставления путей и их простые шаблонов.\n * Пример ниже дает представление о возможностях использования данных шаблонов:\n * ```\n *  'aaa'       === 'aaa'\n *  'aaa'       !== 'bbb'\n *  'aaa.bbb'   === 'aaa.bbb'\n *  'aaa.bbb'   !== 'aaa.ccc'\n *  'aaa.*'     === 'aaa'\n *  'aaa.*'     === 'aaa.*'\n *  'aaa.*'     === 'aaa.bbb'\n *  'aaa.*.ccc' !== 'aaa'\n *  'aaa.*.ccc' === 'aaa.*'\n *  'aaa.*.ccc' !== 'aaa.bbb'\n *  'aaa.*.*'   === 'aaa.bbb'\n *  'aaa.*.ccc' === 'aaa.bbb.*'\n *  'aaa.*.ccc' === 'aaa.bbb.ccc'\n *  '*'         === 'aaa'\n *  '*'         === 'aaa.bbb'\n *  '*'         === 'aaa.bbb.ccc'\n * ```\n */\n\n\nconst re = /[\\\\\\/\\.]/;\n\n/**\n * Функция сравнивает пути и шаблоны путей\n * @param {string} path1 or template\n * @param {string} path2 or template \n * @returns {boolean} вернет true если совпадают, иначе false\n */\nexport default function comparePaths(pathName1, pathName2) {\n    const path1 = Array.isArray(pathName1) ? pathName1 : pathName1.split(re);\n    const len1 = path1.length;\n\n    const path2 = Array.isArray(pathName2) ? pathName2 : pathName2.split(re);\n    const len2 = path2.length;\n\n    const len = Math.max(len1, len2);\n\n    let isEqual = true;\n\n    for (let i = 0; i < len; i++) {\n        const key1 = path1[i];\n        const key2 = path2[i];\n        if (key1 === '*' && len1 === i + 1) break;\n        if (key2 === '*' && len2 === i + 1) break;\n        if (key1 === '*' || key2 === '*' || key1 === key2) continue;\n        isEqual = false;\n        break;\n    }\n\n    return isEqual;\n}\n\n\n// comparePaths('aaa', 'aaa');\n// comparePaths('aaa', 'bbb');\n// comparePaths('aaa.bbb', 'aaa.bbb')\n// comparePaths('aaa.bbb', 'aaa.ccc')\n// comparePaths('aaa.*', 'aaa')\n// comparePaths('aaa.*', 'aaa.*')\n// comparePaths('aaa.*', 'aaa.bbb')\n// comparePaths('aaa.*.ccc', 'aaa')\n// comparePaths('aaa.*.ccc', 'aaa.*')\n// comparePaths('aaa.*.ccc', 'aaa.bbb')\n// comparePaths('aaa.*.*', 'aaa.bbb')\n// comparePaths('aaa.*.ccc', 'aaa.bbb.*')\n// comparePaths('aaa.*.ccc', 'aaa.bbb.ccc')\n// comparePaths('*', 'aaa')\n// comparePaths('*', 'aaa.bbb')\n// comparePaths('*', 'aaa.bbb.ccc')\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","\nimport ExtendEventEmitter from './class.extend.event.emitter.js'\n\nconst bus = new ExtendEventEmitter(false);\n\nexport default bus;\n\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import bus from './tools/tool.events.bus.js';\n\nimport config from './config.js';\n\nimport BootState from './states/state.boot.js';\nimport MainMenuState from './states/state.mainmenu.js';\nimport GameState from './states/state.game.js';\n\n\n\n\nexport default class Game extends Phaser.Game {\n    constructor() {\n        super({\n            width: config.screenWidth,\n            height: config.screenHeight,\n            renderer: Phaser.WEBGL,\n            antialias: true,\n            multiTexture: true,\n            // pixelArt: true,\n        });\n        \n        console.log('Game.constructor');\n\n        // подключаем сцены\n        this.state.add('BootState', BootState, false);\n        this.state.add('MainMenuState', MainMenuState, false);\n        this.state.add('GameState', GameState, false);\n\n\n        // подменяем update\n        this.updateOrig = this.update;\n        this.update = (...args) => {\n            this.updateOrig(...args);\n            bus.emit('core.update', this, ...args);\n        }\n\n        // запускаем сцену загрузки\n        this.state.start('BootState');\n\n        console.log(this)\n\n    }\n\n\n    // gamePaused(event) {\n    //     console.log('Game.onPause', event)\n    //     this.state.pause()\n    //     // return true; \n    // }\n    // gameResumed(event) {\n    //     console.log('Game.onResume', event)\n    // }\n   \n\n}\n\n\nconst game = new Game();"],"names":["config","bus","Component","ComponentSingleton","once","core","load","image","gamePath","mouseIsPresent","mouseMoveHandler","e","window","removeEventListener","addEventListener","Crosshair","game","parent","name","addToStage","enableBody","physicsBodyType","console","log","updateOnlyExistingChildren","crosshairs","sprite","Phaser","Sprite","anchor","set","scale","alpha","setCrosshair","canvas","rect","getBoundingClientRect","x","clientX","left","width","clientWidth","y","clientY","top","height","clientHeight","visible","style","cursor","crosshair","data","find","item","push","warn","removeChild","exists","addChild","addCrosshair","crosshairName","forEach","dt","EntityBase","EntityAnimal","foodCounter","foodTime","foodProgress","elapsed","time","elapsedMS","isProductProgressPaused","foodStatus","setStaus","amount","snd_feed","play","productTime","productProgress","productStatus","Math","min","autoCollect","emit","wx","wy","entityName","snd_collect","FoodStatus","ProductStatus","atlas","audio","EntityChicken","add","position","EntityCow","volume","bitmapFont","statusSprite","smoothed","statusText","BitmapText","progress","counter","text","spritesheet","barBackSprite","TileSprite","tint","barSprite","EntityWheat","sector","floor","random","substr","sprites","Array","fill","map","_","index","frameName","isCurrent","Keyboard","entities","GameEntityGui","snd_button","plateSprite","icons","Object","keys","reduce","a","n","i","spriteName","Button","button","pointer","onIconPress","input","useHandCursor","activePointer","rightButton","isDown","GameEnviromentGui","size","center","dist","hypot","tilesSet","spriteData","getSpriteInfo","timer","presetName","tilesPreset","tilesPresets","acc","key","r","tilesetName","count","some","tilesPresetsData","frames","length","near","greengrass","far","drygrass","dry","stounegrass","forest","pinetree","aldertree","GameWorldGui","snd_entity_set","layers","ceil","Group","entity","fade","fields","xx","yy","field","inputLayer","onPress","lx","ly","Entity","destroy","sort","SORT_ASCENDING","collect","Vector2","GameStateGui","entityNames","wheat","chicken","cow","gold","iconNames","values","collectedElements","collectedSpriteCache","snd_money","angle","startCollectAnimation","PI","resetCounters","on","resourceName","feed","iconName","fromX","fromY","target","shift","targetOptions","velocity","filter","options","dx","dy","distance","direction","multiply","normalize","IncorrectOrientation","state","getCurrentState","backSpr","graphics","beginFill","drawRect","inputEnabled","infoSpr","create","onGameSizeChange","onSizeChange","f","sx","scaleFactor","sy","s","texture","frame","MainMenuGui","snd_button_switch","playButton","onPlayPressed","keyboard","ENTER","SPACE","start","stop","Loader","TEXTURE_ATLAS_JSON_HASH","StaticBacground","backSprite","cloudsGroup","clouds","logoSprite","ratio","maxDist","max","q","deltaAngle","rotation","pow","brightness","speed","dr","cos","sin","setTo","dbr","br","timeExpected","yoyo","abs","_rotation","SystemButtons","btnSound","onMutePress","btnNoSound","sound","mute","btnFSOpen","onFullscreenPress","btnFSClose","screenWidth","screenHeight","btnHeight","device","desktop","h","sprS","compatibility","supportsFullScreen","setButtonsVisible","enabled","isFullScreen","stopFullScreen","startFullScreen","sharedPath","updateOrig","update","updateHandler","destroyOrig","destroyHandler","stopOrig","stopHandler","startOrig","startHandler","make","init","isMake","isActive","args","shutdown","paused","resumed","Element","singletons","singleton","initOrig","initHandler","setIgnoreChildInput","value","ignoreChildInput","State","group","world","scaleMode","ScaleManager","EXACT_FIT","fullScreenScaleMode","refresh","BootState","BAR_WIDTH","BAR_HEIGHT","onFileComplete","bootFileComplete","onLoadComplete","bootLoadComplete","oncontextmenu","preventDefault","resume","cacheKey","success","totalLoaded","totalFiles","remove","gameFileComplete","gameLoadComplete","isLoaded","connectionStatusText","next","back","tileSprite","bitmapText","setTimeout","GameFieldsGui","GameState","system","seed","entityPanel","statePanel","debug","inputInfo","MainMenuState","snd_background","pause","gui","comparePaths","ExtendEventEmitter","isAsync","__isAsync","__e","splitter","eventName","path1","split","list","path","listeners","listener","context","getListeners","isArray","idx","findIndex","splice","slice","setImmediate","apply","_self","g","removeListener","lesteners","downListener","bind","upListener","setListeners","call","event","code","replace","toUpperCase","Matrix","b","m","j","dz","sz","from","up","vz","subtract","vx","cross","vy","getTranslation","eye","z","fovy","aspect","radians","tan","v","Vector3","w","divide","type","toAngle","isNaN","atan2","acos","dot","re","pathName1","pathName2","len1","path2","len2","len","isEqual","key1","key2","Game","renderer","WEBGL","antialias","multiTexture"],"sourceRoot":""}